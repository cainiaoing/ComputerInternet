## 第一章 引论

#### 1.1计算机网络的产生和发展

1、早期的计算机应用模式 - 单机（以单计算机为中心的联机系统）

```powershell
- 大、中、小型机——庞大，昂贵，资源无法共享
- 分散的计算机构成了一个个的信息“孤岛”
```

2、计算机网络产生的20世纪50年代，产生原因

```powershell
- 资源共享的需求（计算能力、外设、软件、数据）
- 大型项目的合作（进行工程项目协作）
- 人与人之间的信息沟通（数据通信）
```

3、计算机·网络发展的3个阶段（三代网络），体系结构上

```powershell
1. 以主机为中心的联机终端系统
	“计算机－终端”系统
2. 以通信子网为中心的主机互联
  分组交换网络
3. 体系结构标准化网络
  层次化结构，并对每层进行了精确定义
```

4、 以主机为中心的联机终端系统

```c
特征：终端(Terminal)共享主机(Host)的软硬件资源
- 单台主机：执行计算和通信任务
- 多台终端：执行用户交互
- (终端集中器/终端服务器)
连接方式：本地或远程
    
缺点：主机负荷重（效率低）——数据处理＋通信
    通信线路利用率低（尤其体现在远距离时）
    集中控制方式，可靠性低，中央主机失效导致整个系统崩溃
    
解决方式：
    多点通信线路
    终端集中器 + 前端处理机（FEP）-->作用是将通信任务从主机中分离出来。
    （见书本上1.1）
```

5、以通信子网为中心的主机互联

```markdown
特征
- 多个终端主机系统互联，形成了多主机互联网络
- 网络结构从“主机－终端” 转变为“主机－主机”
见图1.2

主机 - 主机 网络的演变阶段一
  1、 通信任务从主机中分离，由通信控制处理机（CCP）完成
     CCP：处理主机之间完成通信任务的专用计算机
  2、两层网络概念的出现
    由CCP组成的传输网络——通信子网，提供信息传输服务
    建立在通信子网基础上的主机集合——资源子网，提供计算资源
  在通信子网上可有多个资源子网，共享通信子网的服务

主机 - 主机 网络的演变阶段二
  1、通信子网规模逐渐扩大
  2、私有→社会公用
  3、公用数据通信网
    PSTN（电话线路）
    X.25（美国的一个线路）
 优点
    降低用户系统建设成本
    提高通信线路利用率
    兼容性好
 例子：因特网的前身——ARPANET
    具有现代网络的许多特征，例如：
   - 分组交换
   - 分层次的网络体系
   - 较为完善的通信协议
 
```

6、体系结构标准化网络

```shell
1、为什么需要标准化？
  不同网络设备之间的兼容性和互操作性是推动网络体系结构的标准化的原动力
  而兼容性和互操作性的最终目的仍是资源共享

2、网络体系结构标准化过程的演变
  一、厂商标准：IBM-SNA，DEC-DNA等，这样容器形成垄断，而且标准不统一。
  二、国际标准（ISO->(开放系统互联参考模型，简称OSI参考模型）：
     (1)OSI参考模型是一种概念上的网络模型，规定了网络体系结构的框架：7个层次
     (2)只说明了做什么（What to do），而未规定怎样做（How to do）
     (3)太复杂，几乎没有与之完全符合的网络
  三、事实上的标准：TCP/IP(因特网的骨干协议)
    从体系结构上看，它是OSI参考模型的简化（4层）
    IPv6解决了IPv4资源枯竭的问题。
    
特点：
	以功能作为划分层次的基础. 2)第n层的实体在实现自身定义的功能时,只能使用第n-1层提供的服务. 3)第n层在向第n+1层提供的服务时,此服务不
```

7、局域网(LAN)

```powershell
局域网的覆盖范围一般是方圆几千米之内，其具备的安装便捷、成本节约、扩展方便等特点使其在各类办公室内运用广泛。局域网可以实现文件管理、应用软件共享、打印机共享等功能，在使用过程当中，通过维护局域网网络安全，能够有效地保护资料安全，保证局域网网络能够正常稳定的运行

LAN技术发展最迅速的是著名的以太网Ethernet
以太网是LAN的主流网络
```

8、因特网

```markdown
1、Internet
  是由ARPANET发展演化而逐步形成的。TCP/IP为因特网的发展注入了新鲜的活力，是网络互联成为了可能。
  1989年Web技术出现，使Internet得到普及，网络巨头在国内出现
  
  - 因特网的出现标志着网络时代的到来
  - 因特网是全球性的网络

2、下一代因特网（NGI）
   其目标使更大、更快、更高效的服务质量和更方便的使用。
   
 3、内联网（Intranet）
   - 定义：将因特网的构造技术应用于企业的内部网络
   - 特点：为满足某个企业／事业单位自身的需要而建立
        基于因特网的技术和工具，采用TCP／IP协议
        广泛采用WWW的技术
        和因特网连接
        接底层的控制网络，管理、优化、监控企业的生产过程 
   - Extranet(外联网)
    将内联网的范围延伸扩大，扩大到企业的外部，形成企业外部网络。 
   - VPN(虚拟专用网)
    构建内联网和外联网 
    
    
    
4、小知识：
  计算机网络按其作用的地理范围，可分为局域网和广域网两种。 局域网是在一个较小的区域内的网络，通常是指一幢楼内或一个单位内。
  广域网又称远程网，它的作用范围通常为几十到几千公里，甚至整个世界。比如因特网已经把180多个国家和地区的几千万台计算机连接起来，形成了一个遍布全世界的广域网。
```

9、“三网”融合

```powershell
一、定义：“三网”融合就是指原先独立设计和运营的传统电信网、计算机互联网和有线电视网将趋于相互渗透和相互融合。
二、原因：
   - 信号数字化 
   - 共同的承载网络
   - 相同的呼叫地址形式
   - 信息资源共享
三、特征
   - 网络在物理层上是互通的
   - 用户只需一个物理网络连接
   - 在应用层上，各网络之间的业务是相互渗透和交叉的
   - 网络之间的协议要么兼容，要么可以进行无缝转换

```

10、NGN(下一代通信网络)

```c
一、定义：是以软交换为核心的，能够提供包括语音、数据、视频和多媒体业务的基于分组技术的综合开放的网络架构
    
二、优势：
   - 开放的、分层的网络构架体系
   - 业务与呼叫控制分离、呼叫控制与承载相分离 
   - 支持各种业务和用户无拘束的接入
   - 可与现有网络互通
   - 支持移动性
   - 电信级的硬件平台

```

#### 1.2计算机网络的概念

```powershell
计算机网络定义的主要观点：
  - 从应用的观点：以相互共享资源方式连接起来，且各自具有独立功能的计算机系统的集合。
  - 从物理的观点：在网络协议的控制下，由若干台计算机和数据传输设备组成的系统。
  - 观点3：利用各种通信手段，把地理分散的计算机互联起来，能够互相通信且共享资源的系统。

归纳和综合
  - 计算机网络：相互连接的自治计算机的集合
    - 自治：能独立运行，不依赖于其他计算机
    - 互联：以任何可能的通信连接方式
          有线方式：铜线、光纤
          无线方式：红外、无线电（微波）、卫星

```

![image-20210907214505025](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210907214505025.png)



#### 1.3计算机网络系统的组成

```markdown
一、硬件
  - 网络结点
     1、端节点：计算机
     2、中间节点：交换机、集中器、复用器、路由器、中继器
  - 通信链路 信息传输的通道
     - 物理：传输介质
     - 逻辑：信道
     - 类比——CATV的电缆和频道之间的关系
     
     
二、软件
   - 通信软件（网络协议软件）
   - 网络操作系统 
   - 网络管理/安全控制软件、网络应用软件

```

#### 1.4计算机网络的分类

一、按照地域范围分类

```markdown
- 局域网（LAN）
     范围：小 < 20km
     传输技术：基带，延迟低，出错率低
     拓扑结构：总线，环
- 城域网（MAN）
     范围：中等，＜100km
     传输技术：宽带/基带
     拓扑结构：总线
 - 广域网（WAN）
     范围：大，＞100km
     传输技术：宽带，延迟大，出错率高
     拓扑结构：不规则，点到点
```

二、按照按拓扑结构分类

```markdown
- 星形 --> 有一个中心节点，其他节点与其构成点到点连接
- 树形 --> 一个根节点、多个中间分支节点和叶子节点构成
- 总线型 --> 所有节点挂接到一条总线上，广播式信道
         需要有介质访问控制规程以防止冲突
- 环形 --> 所有节点连接成一个闭合的环，节点之间为点到点连接

- 全连接 --> 点到点全连接，连接数随节点数的增长迅速增长（N(N－1)/2），使建造成本大大提高，只适用于节点数很少的广域网中
   
- 不规则（网状） --> 点到点部分连接，多用于广域网，由于连接的不完全性，需要有交换节点
    
图见书上1.5
    
 # 比较计算机网络的几种主要的拓扑结构的特点和适用场合?
 总线型结构（适用于局域网）
 	由一条高速公用主干电缆即总线连接若干个结点构成网络。网络中所有的结点通过总线进行信息的传输。这种结构的特点是结构简单灵活，建网容易，使用方便，性能好。
 	其缺点是主干总线对网络起决定性作用，总线故障将影响整个网络。 总线型拓扑是使用最普遍的一种网络。
星型拓扑(适用于局域网)
	星型拓扑由中央结点集线器与各个结点连接组成。这种网络各结点必须通过中央结点才能实现通信。
	星型结构的特点是结构简单、建网容易，便于控制和管理。
	其缺点是中央结点负担较重，容易形成系统的“瓶颈”，线路的利用率也不高。
环型拓扑（一般用于运营商）
	环型拓扑由各结点首尾相连形成一个闭合环型线路。
	环型网络中的信息传送是单向的，即沿一个方向从一个结点传到另一个结点；每个结点需安装中继器，以接收、放大、发送信号。
	这种结构的特点是结构简单，建网容易，便于管理。
	其缺点是当结点过多时，将影响传输效率，不利于扩充。
树型拓扑（适用于局域网）
	树型拓扑是一种分级结构。
	在树型结构的网络中，任意两个结点之间不产生回路，每条通路都支持双向传输。
	这种结构的特点是扩充方便、灵活，成本低，易推广，适合于分主次或分等级的层次型管理系统。
网型拓扑（广域网）
	主要用于广域网
	，由于结点之间有多条线路相连，所以网络的可靠性较搞高。
	由于结构比较复杂，建设成本较高。
混合型拓扑/不规则（网状）
	混合型拓扑可以是不规则型的网络，也可以是点-点相连结构的网络。
```

三、按通信传播方式分类：

```shell
一、点对点传输方式的网络：由一对对机器间的多条传输链路构成。
    1、 信源与信宿之间的通信需经过一台和多台中间设备进行传输。
    2、网状、环形、树形、星形
  
二、广播方式网络：一台计算机发送的信息可被网络上所有的计算机接收。
   总线型、无线（微波、卫星）

三、小知识：局域网和广域网采用的传播方式
   局域网络通常使用广播方式，
   广域网络通常使用点对点方式(也有例外)。


```

四、按通信介质：

```c
有线网
	采用如同轴电缆、双绞线、光纤等物理介质来传输数据的网络。 
无线网
	采用卫星、微波等无线形式来传输数据的网络。 

```

五、按通信速率分类：

```markdown
- 低速网：这种系统通常是借助调制解调器利用电话网来实现的

- 中速网： 这种系统主要是传统的数字式公用数据网

- 高速网： 信息高速公路的数据传输速率会更高
```

六、只能使用用户分类

```markdown
- 公用网
  公用网又称公众网。对所有的人来说，只要符合网络拥有者的要求就能使用这个网，也就是说它是为全社会所有的人提供服务的网络
  
- 专用网
  专用网为一个或几个部门所拥有，它只为拥有者提供服务，这种网络不向拥有者以外的人提供服务
```

七、**按使用用户分类**

```c
1、集中式计算机网络
  这种网络的处理控制功能都高度集中在一个或少数几个节点上，所有的信息流都必须经过这些节点之一。

2、分布式计算机网络
   在这种网络中，网络中的任一节点都至少和另外两个节点相连接，信息从一个节点到达另一节点时，可能有多条路径。
```

八、按网络环境分类

```makdown
- 部门网络（Departmental Network）
	部门网络是局限于一个部门的LAN，该网络通常由几十个工作站、若干个服务器，以及可共享的打印机等设备所组成。

- 企业网络（Enterprise-Wide Network）
	这是在一个企业中配置的、能覆盖整个企业的计算机网络。

- 校园网络（Campus Network）
	指在学校中配置的、覆盖整个学校的计算机网络。

```

#### 1.5名词解释

1、计算机网络

```powershell
地理上分散的多个独立自主的计算机遵循规定的通讯协议，通过软、硬件互连以实现交互通信、资源共享、信息交换、协同工作以及在线处理等功能的系统。(注解：此条信息分为系统构成+5个系统功能)。
```

2、计算机网络发展的3个时代

```makefile
第一个时代：1946年美国第一台计算机诞生;

第二个时代：20世纪80年代，微机的出现;

第三个时代：计算机网络的诞生以及应用。
```

3、Internet的前身

```c
Arparnet
```

4、分组交换

```c
是一种存储转发交换方式，它将要传送的报文分割成许多具有同一格式的分组，并以此为传输的基本单元一一进行存储转发。
```

5、分组交换方式与传统电信网采用的电路交换方式的长处所在

```c
线路利用率高、可进行数据速率的转换、不易引起堵塞以及具有优先权使用等优点。
```

6、以太网

```c
用同轴电缆连接多台计算机的局域网络。
```

#### 1.6常见的计算机网络分类

```c
a. 按地域范围：可分为局域网、城域网、广域网

b. 按拓补结构：可分为总线、星型、环状、网状

c. 按交换方式：电路交换网、分组交换网、帧中继交换网、信元交换网

d. 按网络协议：可分为采用TCP/IP,SNA,SPX/IPX,AppleTALK等协议
```

#### 1.7网络体系结构以及协议

```markdown
(1) 实体：包括用户应用程序、文件传输包、数据库管理系统、电子邮件设备以及终端等一切能够发送、接收信息的任何东西。

(2) 系统：包括一切物理上明显的物体，它包含一个或多个实体。

(3) 协议：用来决定有关实体之间某种相互都能接受的一些规则的集合。

包括语法(Syntax,包括数据格式、编码以及信号电平)、语义(Semantics，包括用于协调和差错处理的控制信息)、定时(Timing，包括速度匹配和排序)。
```



#### 1.8计算机网络系统与分布式系统之间的区别主要为：

```markdown
# 共同点
	在计算机硬件连接上、系统拓扑结构和通信控制等方面基本都是一样的，它们都具有通信和资源共享的功能

分布式计算机系统是
	在分布式计算机操作系统的支持下，进行分布式数据处理和各计算机之间的并行计算工作，也就是说各互连的计算机可以相互协调工作，共同完成一项任务，一个大型程序可以分布在多台计算机上并行运行。
计算机网络系统
	是在网络操作系统支持下，实现互连的计算机之间的资源共享，计算机网络系统中的各计算机通常是各自独立进行工作的。所以操作系统不同，而操作系统就是高层软件
```



#### 1.9通信子网和资源子网

```markdown
# 什么是通信子网和资源子网?试述这种层次结构观的特点以及各层的作用是什么?

通信控制处理机构成的通信子网是网络的内层，或骨架层，是网络的重要组成部分。
网上主机负责数据处理，是计算机网络资源的拥有者，它们组成了网络的资源子网，是网络的外层，
通信子网为资源子网提供信息传输服务，资源子网上用户间的通信是建立在通信子网的基础上。没有通信子网，网络不能工作，而没有资源子网，通信子网的传输也失去了意义，两者合起来组成了统一的资源共享的两层网络。将通信子络的规模进一步扩大，使之变成社会公有的数据通信网
```

#### 1.10耦合度

```markdown
# 耦合度
	是一种软件度量，是指一程序中，模块及模块之间信息或参数依赖的程度。
# 按耦合度的不同如何区分计算机网络和其它计算机系统
处理机之间连接的紧密程度，可用处理机之间的距离及相互连接的信号线数目表示计算机网络与多机系统在耦合程度上有明显差别：多机系统是紧耦合系统，计算机网络属于松耦合系统。
```

#### 1.11计算机网络的基本功能是什么？

> 计算机网络的基本功能是数据通信和资源共享。

#### 1.12资源共享主要是指哪些资源？

> 资源共享包括硬件、软件和数据资源的共享

13.计算机网络根据其覆盖范围可分为哪三类？

> 计算机网络根据其覆盖范围可分为局域网、城域网和广域网。

## 第二章：数字通信基础

### 数字通信系统的主要构成

> 传输介质、传输设备（多路复用器、交换机）等及数据处理系统

### 1、数据通信系统

![image-20210909180056865](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210909180056865.png)

```c
- 源系统
  源点：源点设备产生通信网络要传输的数据。
  发送器：通常源点生成的数据要通过发送器编码后才能够在传输系统中进行传输。
    
- 目的系统
    接收器：接收传输系统传送过来的信号，并将其转换为能够被目的设备处理的信息。
    终点：终点设备从接收器获取传送来的信息。
- 传输系统
     可以是简单的物理通信线路
     也可以是连接源系统和目的系统之间的复杂网络设备

```

数据通信的基本过程

| 过程         | 与打电话比较       |
| ------------ | ------------------ |
| 建立物理连接 | 拨号，拨通对方     |
| 建立逻辑连接 | 互相确认身份       |
| 数据传输     | 互相通话           |
| 断开逻辑连接 | 互相确定要结束通话 |
| 断开物理连接 | 双方挂机           |

> 注意，并不是所有的数据通信都需要全部5个阶段

### 2、基本概念

```markdown
- 数据
  传递（携带）信息的实体。
  
- 信息（Information）
  数据的内容或解释。

- 信号（Signal）
  数据的物理量编码（通常为电编码），数据以信号的形式在介质中传播

- 模拟信号
  时间上连续，包含无穷多个信号值(物理信号)

- 数字信号
  时间上离散，仅包含有限数目的信号值。最常见的是二值信号

- 周期信号
  信号由不断重复的固定模式组成（如正弦波）

- 非周期信号
  信号没有固定的模式和波形循环（如语音的音波信号）。

- 信息编码
  将信息用二进制数表示的方法（ASCLL编码）
  
- 数据编码
  将数据用物理量表示的方法，例如：字符“A”的ASCII编码为01000001，其数据编码可能为如图2

```

![image-20210909180938774](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210909180938774.png)

![image-20210909181225010](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210909181225010.png)



```markdown
- 信息通过数据通信系统进行传输的过程
  把携带信息的数据用物理信号形式通过信道传送到目的地
    信息和数据（二进制位）不能直接在信道上传输

- 编码：数据→适合传输的数字信号——便于同步、识别、纠错

- 调制：数字信号→适合传输的形式——按频率、幅度、相位

- 解调：接收波形→数字信号

- 解码：数字信号→原始数据

```

![image-20210909181444901](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210909181444901.png)

![image-20210909181728182](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210909181728182.png)



```markdown
- 编码与调制的区别
   编码：用数字信号承载数字或模拟数据
   调制：用模拟信号承载数字或模拟数据

```

信道主要传输模拟信息和数字信息

```powershell
- 信道
  传送信息的线路（或通路）
  
- 数字信道
  以数字脉冲形式（离散信号）传输数据的信道
  # 计算机网络中主要采用  数字信道  进行数据传输（像局域网）

- 模拟信道
  以连续模拟信号形式传输数据的信道
  CATV、无线电广播、电话拨号线路

### 数字通信与模拟通信
  - 数字通信
    在数字信道上实现模拟信息或数字信息的传输
  - 模拟通信
    在模拟信道上实现模拟信息或数字信息的传输
  
  - 数字通信的优点
    # 抗噪声（干扰）能力强
    # 可以控制差错，提高了传输质量 
    # 便于用计算机进行处理
    # 易于加密、保密性强 
    # 可以传输语音、数据、影像，通用、灵活


```



### 3、通信方式

主要体现在整个通信系统模型上（原系统一直到目的系统的整个系统）

| 方式   | 解释                                           | 例子       |
| ------ | ---------------------------------------------- | ---------- |
| 单工   | 数据单向传输                                   | 无限电广播 |
| 半双工 | 数据可以双向交替传输，但不能在同一时刻双向传输 | 对讲机     |
| 全双工 | 数据可以双向同时传输                           | 电话       |

全双工的要求

> •需要具有两条物理上独立的传输线路；
>
> •或者需要具有一条物理线路上的两个信道，分别用于不同方向的信号传输



### 4、传输方式

> 针对与信道上的传输

| 传输方式 | 解释                                                         | 例子                 |
| -------- | ------------------------------------------------------------ | -------------------- |
| 基带传输 | 不需调制，编码后的数字直接在数字信道上传送                   | 以太网（局域网）     |
| 频带传输 | 数字信号调制成音频模拟信号后再传送，接收方需要解调。         | 通过电话网络传输数据 |
| 宽带传输 | 把信号调制成频带为几十MHZ到几百MHZ的模拟信号后再传送，接收方需要解调。 | 闭路电视的信号传输   |

**基带传输和宽带传输的区别**

```markdown
基带传输：

    ​​由计算机或终端产生的数字信号，频谱都是从零开始的，这种未经调制的信号所占用的频率范围叫基本频带(这个频带从直流起可高到数百千赫，甚至若干兆赫)，简称基带(base band)。这种数字信号就称基带信号。举个简单的例字拉：在有线信道中，直接用电传打字机进行通信时传输的信号就是基带信号。而传送数据时，以原封不动的形式，把基带信号送入线路，称为基带传输。基带传输不需要调制解调器，设备化费小，适合短距离的数据输，比如一个企业、工厂，就可以采用这种方式将大量终端连接到主计算机。另外就是传输介质，局域网中一般都采用基带同轴电缆作传输介质。

宽带传输：

    ​所谓宽带，就是指比音频(4KHZ)带宽还要宽的频带，，简单一点就是包括了大部分电磁波频谱的频带。使用这种宽频带进行传输的系统就称为宽带传输系统，它可以容纳所有的广播，并且还可以进行高速率的数据传输。对于局域网而言，宽带这个术语专门用于使用传输模拟信号的同轴电缆，可见宽带传输系统是模拟信号传输系统，它允许在同一信道上进行数字信息和模拟信息服务。



基带传输和宽带传输的区别

    ​基带和宽带的区别还在于数据传输速率不同。基带数据传输速率为0～10 Mb/s，更典型的是1Mb/s～2.5Mb/s，通常用于传输数字信息。宽带是传输模拟信号，数据传输速率范围为0～400Mb/s，而通常使用的传输速率是5Mb/s～10 Mb/s，而且一个宽带信道可以被划分为多个逻辑基带信道。这样就能把声音、图像和数据信息的传输综合在一个物理信道中进行，拨号上网一般是用的基带传输。总之，宽带传输一定是采用频带传输技术的，但频带传输不一定就是宽带传输。
```



### 5、同步方式（至关重要）

> 在整个通信系统模型开始前（发送数据前），最前端与最后端一定要进行同步

```markdown
- 同步的因素
  同步脉冲频率（位同步）
  数据从什么时候开始，什么时候结束
  位边界（字符同步）
  数据块边界（帧同步）
  
```

1、位同步

```markdown
- 目的：使接收端与发送端在时间基准上一致

- 分类： 外同步和自同步
  外同步：发送端发送数据之前发送同步脉冲信号，接收方用接收到的同步信号来锁定自己的时钟脉冲频率。
  自同步：通过特殊编码（如曼彻斯特编码），使  数据编码信号  中包含  同步信号  ，接收方从   数据编码信号   提取  同步信号  来锁定自己的时钟脉冲频率。
```

2、字符同步

```markdown
- 目的：找到正确的字符边界
  常用的为起止式（异步式）。在这种方式中，每个字符的传输需要：

```

![image-20210909184536073](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210909184536073.png)



3、帧同步

```markdown
- 目的：识别一个帧的起始和结束

- 帧（Frame）：数据链路中的传输单位——包含数据和控制信息的数据块
   面向字符的——以同步字符（SYN，16H）来标识一个帧的开始，适用于数据为字符类型的帧
   面向比特的——以特殊位序列（7EH，即01111110）来标识一个帧的开始，适用于任意数据类型的帧

```

### 6、传输介质

![image-20210909184745043](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210909184745043.png)

**双绞线，同轴电缆，光纤特点**

```markdown
双绞线：
	1)适合于短距离通信。
	2)非屏蔽双绞线价格便宜，传输速度偏低，抗干扰能力较差。屏蔽双绞线抗干扰能力较好，具有更高的传输速度，但价格相对较贵。
	
同轴电缆：
	1)抗干扰能力强，连接简单。
	2)信息传输速度可达每秒几百兆位，是中、高档局域网的首选传输介质。
	
光导纤维：
	1)光纤的电磁绝缘性能好、信号衰小、频带宽、传输速度快、传输距离大。
	2)主要用于要求传输距离较长、布线条件特殊的主干网连接.
	3)尺寸小、重量轻，数据可传送几百千米，但价格昂贵。
```

**无线介质和有限介质在选择是考虑的问题**

```markdown
无线介质跟有线介质相比的特点：无线介质与有线介质相比最大的优势在于无需布线，适合于复杂的传输环境

1、吞吐量和带宽

吞吐量是在一给定时间段内介质能传输的数据量，它通常用每秒兆位（1 000 000位）或Mbps进行度量。带宽是对一个介质能传输的最高频率和最低频率之间的差异进行度量；频率通常用H z表示，它的范围直接与吞吐量相关。

2、成本

不同种类的传输介质牵涉的成本是难以准确描述的。它们不仅与环境中现存的硬件有关，而且还与你所处的场所有关。

3、尺寸和可扩展性

三种规格决定了网络介质的尺寸和可扩展性：每段的最大节点数、最大段长度、以及最大网络长度。

4、连接性

所使用的连接器的种类将影响网络安装和维护的成本、网络增加段和节点的容易度，以及维护网络所需的专业技术知识。

5、抗噪性

噪声能使数据信号变形。噪声影响一个信号的程度与传输介质有一定关系。
```





### 7、数据编码

```markdown
- 数字数据的数字信号编码
	使数字数据在数字信道上传输
- 数字数据的调制编码
	使数字数据能在模拟信道上传输
- 模拟信号的数字编码
	是模拟数据能在数字信道上传输
	
# 模拟数据在模拟信道上
	移频、调制
# 模拟数据在数字信道上
	PCM编码
# 数字信号在模拟信道上
	调制
# 数字信号在数字信道上
	数字编码

# 通信话路终端语音信号是如何传输的
语音→模拟信号→数字信号→交换设备→数字信号→模拟信号→语音
```

**数字数据编码与模拟数据的数字编码区别**

```markdown
数字数据编码：
	在数字信道中传输计算机数据时，要对计算机中的数字信号重新编码进行基带传输，在基带传输中，数字信号的变法方式主要有不归零编码、曼彻斯特编码、差分曼彻斯特编码三种方法
模拟数据的数字编码编码：
	需要将模拟数据变成一个二进制数据，它用的技术时pcm编码包括采样、量化和编码等过程。。
	
模拟数据编码：
	将计算机中的数字数据在网络中用模拟信号表示，要进行调制，也就是要进行波行变换，或者严格地讲，是进行频谱变换，将数字信号的频谱变换成适合于在模拟信道中传输的频谱。基本的调制方法有调幅、调频、调相三种方法
```





#### 1、数字数据的数字信号编码

```markdown
# 不归零码
	- 二进制数字0、1分别用两种电平来表示；
     常用－5V表示1，＋5V表示0；
  缺点：
   - 存在直流分量，传输中不能有变压器或电容；
   - 不具备自同步机制，传输时必须使用外同步

# 曼彻斯特编码
	用电压的变化表示0和1。
      规定在每个码元的中间发生跳变
  - 高→低的跳变代表1，低→高的跳变代表0
  - 每个码元中间都要发生跳变，接收端可将此变化提取出来作为同步信号。这种编码也称为自同步码
  - 缺点：需要双倍的传输带宽（即信号速率是数据速率的2倍）
  
# 差分曼彻斯特编码
	每个码元的中间仍要发生跳变。
   用码元开始处有无跳变来表示0和1 ，有跳变代表0，无跳变代表1。
   - 自我理解：
   主要是看虚线后的一位数据
   	数据为1：前半码元的电平与上一个后半码元的点平相同
   	数据为0：前半码元的电平与上一个后半码元的点平相反


以下是几种数字编码波形图
```

![image-20210915164203347](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915164203347.png)

![image-20210915164236321](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915164236321.png)



#### 2、数字数据的调制

三种常用的调制技术（知道就行）

> •幅移键控ASK 
>
> •频移键控FSK 
>
> •相移键控PSK 

```markdown
原理：用数字信号对载波的不同参量进行调制。
          载波信号 S(t) = Acos(xt+y) 
S(t)的参量包括： 幅度A、频率x 、初相位y
调制就是要使A、x 或y随数字基带信号的变化而变化

# 主要原理
	ASK：用载波的两个不同振幅表示0和1
 	FSK：用载波的两个不同频率表示0和1
	PSK：用载波的起始相位的变化表示0和1
如图使波形图
```



![image-20210915164718403](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915164718403.png)

#### 3、模拟数据的数字信号编码

> PCM编码（重点）

```markdown
# 采样定理
	如果模拟信号的最高频率为F，若以≥2F的采样频率对其采样，则从采样得到的离散信号序列就能完整地恢复出原始信号。
	针对对象：
		要转换的模拟数据主要是电话语音信号，模拟数据要在数字线路上传输，必须将其转换成数字信号。
# PCM编码
	采样：按一定间隔对语音信号进行采样
	量化：把每个样本舍入到最接近的量化级别上
	编码：对每个舍入后的样本进行编码
编码后的信号称为PCM信号
```

![image-20210915165042597](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915165042597.png)

![image-20210915165051941](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915165051941.png)

### 8、多路复用技术

> 原理：**多个信息源共享一个公共信道**

```markdown
复用的原因：提高线路的利用率

# 复用基本思想
	把公共共享信道用某种方法划分成多个子信道，每个子信道传输一路数据。
# 复用方法
  - 频分复用FDM     按频率划分不同的信道
  
  - 时分复用TDM      按时间划分不同的信道，目前应用最广泛

  
  - 波分复用WDM 		按波长划分不同的信道，用于光纤传输

  
  - 码分复用CDM 		按地址码划分不同的信道，非常有发展前途

```

![image-20210915165207243](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915165207243.png)



### 9、数据交换技术

```markdown
# 交换的定义
	按某种方式动态地分配传输线路资源
  - 例如：电话交换机在用户呼叫时为用户选择一条可用的线路进行接续。用户挂机后则断开该线路，该线路		又可分配给其他用户。
		最初的交换：人工转接交换

 # 采用交换技术的原因
 	节省线路投资，提高线路利用率。
# 交换的主要方法：
	电路交换、报文交换和分组交换。
```

#### 1、电路交换

```markdown
一：在通信双方之间建立一条临时专用线路的过程。
	可以是真正的物理线路，也可以是一个复用信道。
二、特点
	特点：数据传输前需要建立一条端到端的通路。——称为“面向连接的”（典型例子：电话）
三、过程：
	建立连接→通信→释放连接
四、优缺点：
	- 建立连接的时间长；
 	- 一旦建立连接就独占线路，线路利用率低；
	- 无纠错机制；
	- 建立连接后，传输延迟小。
五、不适用于计算机通信：
	因为计算机数据具有突发性的特点，真正传输数据的时间不到10%。

```

#### 2、报文交换（报文为单位）

```markdown
- 以报文为单位进行“存储-转发”交换的技术。
	在交换过程中，交换设备将接收到的报文先存储下来，待信道空闲时再转发出去，一级一级中转，直到目的地。这种数据传输技术称为存储-转发。
	传输之前不需要建立端到端的连接，仅在相邻节点传输报文时建立节点间的连接。——称为“无连接的”
	
# 优点
	没有建立和拆除连接所需的等待时间；
	线路利用率高；
	传输可靠性较高；
# 缺点
	报文大小不一，造成存储管理复杂；
	大报文造成存储转发的延时过长，且对存储容量要求较高；
	出错后整个报文全部重发。

```



#### 3、分组交换（分组为单位）

```markdown
一、定义
	将报文分割成若干个大小相等的分组（Packet）进行存储转发。
二、特征
	数据传输前不需要建立一条端到端的通路——也是“无连接的”。

	有强大的纠错机制、流量控制、拥塞控制和路由选择功能。
三、优缺点
	* 对转发节点的存储要求较低，可以用内存来缓冲分组——速度快；
	* 转发延时小——适用于交互式通信；
	* 某个分组出错可以仅重发出错的分组——效率高；
	* 各分组可通过不同路径传输，容错性好。
	* 需要分割报文和重组报文，增加了端站点的负担。
# 四、分组交换的两种方式
  # 一、数字报方式
  		* 各分组独立地确定路由（传输路径）
		* 不能保证分组按序到达，所以目的站点需要按分组编号重新排序和组装
		  （分组可能通过多个路径穿越网络，所以时间不能保证）
  # 二、虚电路方式
  		* 通信前预先建立一条逻辑连接——虚电路
			虚电路是由其路径上的所有交换机中的路由表定义的逻辑连接
		* 也需要三个过程：建立－数据传输－拆除
			建立虚电路时，交换机将预留传输时所需的所有资源
		* 虚电路的路由在建立时确定，传输数据时则不再需要
		* 提供的是“面向连接”的服务
			但却没有像电路交换那样始终占用一条端到端的物理通道，只是断续地依次占用传输路径上各个链路段——与铁路系统类比！
			可以看成是采用了电路交换思想的分组交换
			能够保证分组按序到达
   # 虚电路又分为两种
   		* 永久虚电路
   		* 交换虚电路
```

### 10、差错控制

```markdown
# 定义：
	在通信过程中，发现、检测差错并进行纠正
# 为何要进行差错控制？
	* 不存在理想的信道→传输总会出错
	* 计算机通信要求极低的差错率。
# 产生差错的原因：
	* 信号衰减和热噪声；
	* 信道的电气特性引起信号幅度、频率、相位的畸变；
	* 信号反射，串扰；
	* 冲击噪声，闪电、大功率电动机的启停等。
# 差错控制的基本方法：
	接收方进行差错检测，并向发送方应答，告知是否正确接收。
# 差错控制技术
	* 自动请求重传（P53）
	* 自动纠错（P53）
	* 混合方式（P53）
```

### 11、常见的检错码

```markdown
# 奇偶校验
	* 在原始数据字节的最高位（或最低位）增加一个奇偶校验位，使结果中1的个数为奇数（奇校验）或偶数（偶校验）。
		例如：1100010增加偶校验位后为11100010
		若接收方收到的字节奇偶校验结果不正确，就可以知道传输中发生了错误。

	* 在通信过程中实现：在发送时增加奇偶校验位。
	* 只能用于面向  字符  的通信协议中
	* 只能检测出奇数个位错，偶数个位错则不能检出。

# 循环冗余校验
	书上P55
	
# 校验和
	
```

### 12、数字通信性能指标

#### 1、时延

```markdown
# 定义：
	一个数据块（帧、分组、报文段等）从链路或网络的一端传送到另一端所需要的时间。
	
# 总时延＝发送时延 + 传播时延 + 转发时延

# 发送时延
	发送时间＝数据块长度/信息传输速率
# 传播时延
	传播时延＝信道长度/电磁波在信道上的传播速率
# 转发时延
	排队时延 + 处理时延


```

#### 2、带宽

```markdown
# 定义：
	信道传输能力的度量
# 在计算机网络中，用每秒允许传输的二进制位数作为带宽的计量单位。主要单位： b/s 、Kb/s、Mb/s、Gb/s。

# 例子
	例如：传统以太网理论上每秒可以传输一千万比特，它的带宽为10Mb/s
	
# 宽带：
    宽的带宽

# 时延带宽乘积
	某一信道所能容纳的比特数
	时延带宽乘积=带宽×传播时延

```

#### 3、误码率和误比特率

```markdown
# 误码率：Pc是指传输的码元被传错的概率 
	Pc ＝ 传错的码元数 ⁄ 传输的码元总数
# 误比特率：Pb是指传输的比特被传错的概率
	Pb ＝ 传错的比特数 ⁄ 传输的比特总数  

```

#### 4、信息传输速率

```markdown
# 比特（bit）：
	即一个二进制位。比特率为每秒传输的比特数（即数据传送速率）。
# 信息传输速率：
	是指每秒传输的编码前的数字数据的二进制比特数 

```

#### 5、码元传输速率

```markdown
# 码元（Code Cell）：
	时间轴上的一个信号编码单元。
#  码元传输速率：
	是指每秒传输的码元数 
# 计算公式
	一般情况下，如果码元状态数为M（M为2的整数次幂），则C=B× log2M（b/s）
# 吞吐量：
	单位时间发送的比特数、字节数或帧数 

```

#### 6、信道的最大数据传输率

```markdown
# 用于无噪声理想低通信道

C = 2W log2 M
	C  ——数据传输率，单位b/s 
	W ——带宽，单位Hz
	M ——信号编码级数
	
# 有噪声干扰信道（实际的信道总是有噪声）
C = W log2 （1+S/N） 
	C——传输率，单位b/s
	W—— 带宽，单位Hz
	S/N——信噪比
  无论信号编码级数增加到多少，此公式给出了有噪声信道
  可能达到的最大数据传输速率上限。
原因：噪声的存在将使编码级数不可能无限增加
```

### 13、调制解调器和编码解码器的区别

```markdown
调制解调器用于在发送端将数字信号调制成模拟信号，在接收端将模拟信号还原成数字信号；
编码解码器在发送端将模拟信号变换成数字信号，在接收端将收到的数字信号恢复成模拟信号。
尽管调制解调器的解调部分与编码解码器的编码部分都能将模拟信号转变为数字信号，但编码器接受任意，无规则的模拟信号，并将它转换成数字信号.而解调器仅接受已调制、罪责的正弦（或余弦）波，并将它转换成数字信号。
```



## 第三章：计算机网络体系结构

### 定义

```markdown
# 什么是网络体系结构
	将同层进程间通信的协议以及相邻层的接口统称为网络体系结构。分层思想对于计算机网络的设计和实现有着极大的优势，如各层之间是独立的、灵活性好、结构可分割、易于实现和维护、促进标准化等。
	
# 什么是网络协议？包括哪些要素？
	网络执行数据交换而建立的规则、标准或约定就是网络协议。典型的网络协议包含语法、语义和同步三个方面。
	
# 服务与协议之间的区别？
	服务涉及相邻层间的接口，协议涉及不同计算机上对等实体之间发送的分组
	
```





### 1、发展历程

```markdown
对于复杂的网络系统，用什么方法能合理地组织网络的结构，以达到：
	- 结构清晰
	- 简化设计与实现
	- 便于更新与维护
	- 较强的独立性和适应性
解决：分而治之
```





生活举例

![image-20210915175527286](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915175527286.png)

![image-20210915175541789](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915175541789.png)

层次的观点

> - 通过自己内部的功能
> - 依赖自己的下层提供的服务

![image-20210915175652430](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915175652430.png)

![image-20210915175712315](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915175712315.png)

### 2、分层原理

```markdown
一、计算机网络中也采用了分层方法。
	——把复杂的问题划分为若干个较小的、单一的局部问题，在不同层上予以解决。
二、网络的层次结构方法要解决的问题
	* 网络应该具有哪些层次？每一层的功能是什么？（分层与功能）
	* 各层之间的关系是怎样的？它们如何进行交互？（服务与接口）
	* 通信双方的数据传输要遵循哪些规则？（协议）
三、组成
	计算机网络中，层、协议和层间接口的集合被称为计算机网络体系结构。
	换句话说：体系结构包括三个内容：分层结构与每层的功能、服务与层间接口、协议。
四、实际中应用最广泛的是TCP/IP体系结构

# 五、层次结构方法的优点
	* 独立性强——耦合程度低
		上层只需了解下层通过层间接口提供什么服务——黑箱方法。
	* 适应性强
		只要服务和接口不变，每层的实现方法可任意改变。
	* 易于实现和维护
		把复杂的系统分解成若干个涉及范围小、功能简单的子单元：
# 六、概念
	实体：任何可以发送或接收信息的硬件/软件  进程。
	协议：通信双方在通信中必须遵守的规则。
	对等层：两个不同系统的同级层次。
	对等实体：分别位于不同系统对等层中的两个实体
	接口：相邻两层之间交互的界面，定义相邻两层之间的操作及下层对上层的服务。
	服务：某一层及其以下各层的一种能力，通过接口提供给其相邻上层。


```

![image-20210915180440540](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915180440540.png)

![image-20210915180602409](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915180602409.png)

#### **2、对等层通信的实质**

```markdown
# 注意：网络分层体系结构原理禁止不同主机的对等层之间进行直接通信。

# 实质：
	* 对等层实体之间实现的是   虚拟的   逻辑通信；（逻辑连接）
	* 下层向上层提供服务；
	* 上层依赖下层提供的服务来与其他主机上的对等层通信；
	* 实际通信在最底层完成（物理层）物理连接
```

#### 3、源进程传送消息到目标进程的过程

```markdown
# 消息送到源系统的最高层；

# 从最高层开始，自上而下逐层  封装；

# 经  物理线路  传输到  目标系统；

# 目标系统将收到的信息  自下而上  逐层  处理  并  拆封；

# 由最高层  将消息提交给  目标进程
```

![image-20210915181023434](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915181023434.png)

#### 4、**体系结构各层中实现的主要功能**

```markdown
# 差错控制
	使对等层的通信更加可靠
# 流量控制
	控制发送端的速率，使接收端能来得及接收
# 分段和重装
	发送端将数据块分成更小的单位，并在接收端重新组合
# 复用和分用
	多个高层的对等层通信会话复用一条低层连接
# 建立连接和释放连接
```

### 3、通信协议

```markdown
# 通信协议
	1、计算机之间
		网络中所有的通信活动都是由协议所控制
	
# 定义
	网络实体间发送和接收报文的格式、顺序以及当传送和接收消息时应采取的行动。（语义、语法和时序）

```

#### 2、通信协议三要素

```markdown
# 语义
	对协议中各协议元素的含义的解释，例如：
		在HDLC协议中，标志Flag(7EH)表示报文的开始和结束
		FCSS:校验
	在BSC协议中，SOH(01H)表示报文的开始，STX(02H)表示报文正文的开始，ETX(03H)表示报文正文的结束

```

**语法**

协议元素与数据的组合格式，即报文格式   例如

![image-20210915182015246](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915182015246.png)

**时序**

> •**通信过程中，通信双方操作的执行顺序和规则**

![image-20210915182105602](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915182105602.png)

#### 3、协议注意事项

```markdown
# 网络体系结构中：
	每层可能会有若干个协议
	一个协议只属于一个层次
# 协议可以由软件或硬件来实现

# 常用协议组：
	TCP/IP（Windows、UNIX、Linux、…）
	NetBEUI（Windows）
	IPX/SPX（NetWare、Windows）

```

### 4、协议数据单元

```markdown
# 定义：
	对等层之间交换的信息报文统称为协议数据单元（PDU）
	
# 传输层及以下各层的PDU另外还有各自特定的名称(单位)
	传输层——段（Segment） 
	网络层——分组/包（Packet）
	数据链路层——帧（Frame）
	物理层——比特（Bit）
# PDU由协议控制信息（协议头）和数据（SDU）组成

# 协议头中有完成数据传输所需要的控制信息

	地址、序号、长度、分段标志、差错控制信息……
# 下层把上层的PDU作为本层的数据加以封装，然后加入本层的协议头部（和尾部）形成本层的PDU。
   封装：
   	就是在数据前面加上特定的协议头部。
	
	* 数据在源站自上而下递交的过程实际上就是不断封装的过程。到达目的地后自下而上递交的过程就是不断拆封的过程
```

PDU组成

![image-20210915182557935](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915182557935.png)

![image-20210915183014939](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915183014939.png)

![image-20210915183032340](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210915183032340.png)

```markdown
一、在目的站，某一层只能识别由源站对等层封装的“信封”，而对于被封装在“信封”内部的“数据”仅仅是拆封后将其提交给上层，本层不作任何处理。

# 每一层只处理本层的协议头部！

```

### 5、两种服务

```markdown
# 面向连接服务
	1、在数据交换之前，必须先建立连接，
	当数据交换结束后，则应终止这个连接。
	2、具有连接建立、数据传输和连接释放三个阶段 。

# 无连接服务
	是指	两个实体	在数据传输时	动态地	进形“分配通信”所需的资源 
	
1.数据报          -   广播/组播
2.可靠的数据报-  挂号邮件
3.请求应答       -  数据库查询

# 他们之间的主要区别？
	两个实体通信前是否建立连接
```

**两种服务的比较**

|                  | 面向连接服务                                                 | 无连接服务                                                   |
| ---------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 参考模式         | 电话系统                                                     | 邮政系统                                                     |
| 特点             | 静态分配资源；传输前需要建立连接                             | 动态分配资源                                                 |
| 可靠性           | **提供可靠的传输服务：无错、按序、无丢失无重复**             | **不能防止报文的损坏、失序、丢失和重复**                     |
| 对目的地址的要求 | **仅在连接阶段需要完整的**地址                               | **需要为每一个报文提供完整的目的地址**                       |
| 使用场合         | 在一段时间内向同一目的地发送大量报文; 实时性要求             | **少量零星报文**                                             |
| 分类级示例       | 1.可靠消息流  -  文件传输<br>	2.可靠字节流  -  远程登录<br>	3.不可靠连接  -  数字化声音 | 1.数据报          -   广播/组播<br/>2.可靠的数据报-  挂号邮件<br/>3.请求应答       -  数据库查询 |

**无连接服务类型**

```markdown
数据报（datagram）
	它的特点不需要接收端做出任何响应，因而是一种不可靠的服务
	
请求应答（request-reply）
	这种类型的数据报要求接收端用户每收到一个报文，就要向发送端用户发送一个应答报文
```

**服务原语**

```markdown
服务原语:
	专供用户和其他实体访问服务。 
服务原语
	只是对服务进行概念性的功能描述，至于如何实现并不作明确规定
	

```

![image-20210927110418298](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210927110418298.png)

### 6、网络参考模型

#### 1、OSI/RM参考模型

单纯的只适和作网络研究

![image-20210927110544845](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210927110544845.png)

##### 2、物理层

```markdown
# 功能：
	在物理媒体(介质)上正确地、透明地传送比特流。
	（通过mac地址去寻址）
# 服务：
	串行（按位传输：数据的二进制代码再一条物理信道上将数据以为一位的依次传输）
	和并行传输（数据以成组的方式，在多条并行信道上同时进行创数，在传输中有多个数据位同时再设备之间同时传输）

# 协议（标准）：规定了物理接口的各种特性
	机械：物理连接器的尺寸、形状、规格
	电气：信号电平，信号的脉冲宽度和频率，数据传送速率，最大传输距离等
	功能：接口引（线）脚的功能和作用
	规程：信号时序，应答关系，操作过程

# DTE和DCE
	DTE:具有一定的数据处理能力以及收发能力的数据输入/输出设备、终端设备或计算机等终端装置。 
	DCE:自动呼叫应答设备、交换机以及其他一些中间装置的集合
		作用就是在DTE和传输线路之间提供信号变换和编码的功能，并且负责建立、保持和释放数据链路连接。 
```

![image-20210927114712482](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210927114712482.png)

##### 3、数据链路层

```markdown
在两个相邻节点间可靠地传输数据，使之对网络层呈现为一条无错的链路。

# PDU:帧

# 功能：
	1、建立与拆除数据链路连接
	2、组帧：帧封装，按顺序传送，处理返回的确认帧
	3、物理寻址：MAC地址（烧制网卡的固定地址，具有唯一性）/物理地址
	4、定界与同步：产生/识别帧边界
	5、错误检测/恢复：可靠的传输，CRC，ARQ
	6、流量控制：抑止发送方的传输速率，使接收方来得及接收
# 服务：
	无确认无连接服务 
	有确认无连接服务
	面向连接的服务
  根据确认的发送条件，将确认机制分为三种方式：
	正向确认
	双向确认
	负向确认
	
# 协议
	面向字符的：
		数据以字符为单位传输，用控制字符控制通信
	面向比特的：
		数据以位为单位传输，用帧中的控制字段控制通信

# 共享信道问题
	1、如何控制对共享信道的访问
	将数据链路层划分为逻辑链路控制（LLC）和介质访问控制,MAC)两个子层，由MAC子层解决共享介质访问控制问题。
	2、LAN使用的两种主要介质访问控制方法
    	SCMA/CD
    	TOKEN PASSING(令牌环网)
```

##### 4、网络层

```markdown
# 寻址
	通过ip地址去寻址）并选择合适的路由，把数据报从源端传送到目的端，在需要时对上层的数据进行分段和重组。
	
# PDU:数据报（IP-分组Packet），但是数据包就不对，要么传输的是数据报，要么是分组

# 功能
	1、在源端与目的端之间建立、维护、终止网络的连接
	2、寻址、路由选择和分组中转
	3、分段与组合：大数据块分段，小数据块组合
	4、流量控制和拥塞控制
	5、多路复用：为多个传输层实体提供网络连接服务
	6、差错检测与恢复
	7、流量统计和记账
# 服务：
	一、数据报（Datagram）服务 
		1、网络层从传输层接受报文（发送时）并拆分为报文分组，把每一个分组作为一个独立的信息单位传送
		2、特征：不需建立连接、每个数据报都附有网络地址、要求路由选择、数据报不能保证按序到达目的地、对故障的适应性强、易于平衡网络流量
	
	二、虚电路（Virtual Circuit）服务 
		1、在源主机要与目的主机通信之前，应先建立一条网络连接（没有物理上的连接）
		2、特征：要求先建立连接、全网地址、路由选择、按序到达、可靠性较高、适用于交互式作用 
```

![image-20210927144454677](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210927144454677.png)

```markdown
# 路由选择
	如何在多条通信路径中找一条最佳路径？ 
		依据：速度、 距离(步跳数)、 价格、 拥塞程度
	路由器——路由表建立与维护
		静态：人工设置，只适用于小型网络
		动态：运行过程中根据网络情况自动地动态维护
	路由算法——建立与维护路由表的方法
		距离向量算法：RIP、CGP等
		链路状态算法：OSPF等

```

![image-20210927212450348](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210927212450348.png)

##### 5、传输层

```markdown
# 主要任务
	对网络层的连接进行管理，在源端与目的端之间提供可靠的、透明的数据传输，使上层服务用户不必关心通信子网（对于传输层，它的通信子网主要是：网络层，数据链路层，物理层）的实现细节。

# 传输层的特点：
	1、以上各层：面向应用，本层及以下各层：面向传输；
	2、与网络层的部分服务有重叠交叉，功能取舍取决于网络层功能的强弱；
	3、只存在于端主机中；
	4、实现源主机到目的主机“端到端”的连接
		这一点传输层和网络层之间的区别是：
			网络层：为主机之间提供逻辑传输
			传输层：为应用进程之间提供逻辑传输
# 功能
	1、地址映射：
		源端进程地址映射到网络地址，或反之；
	2、多路复用与分割：
		多个传输连接共用一条网络连接；
		一条传输连接使用多个网络连接；
	3、进行数据分段并在目的端重新组装；
	4、传输连接的建立与释放；
	5、提供“面向连接” 和“无连接” 两种服务：

	6、传输差错校验与恢复；
	7、流量控制，防止数据传输过载
```

**传输层和网络层的关系**

> 网络层则提供网络中主机间的“逻辑通信” ；而传输层提供主机中的进程间的“逻辑通信” 
>
> 主机：单位的传达室
>
> 进程：单位中传送传达室文件的职工

![image-20210927213812053](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210927213812053.png)

##### 6、会话层

```markdown
# 主要任务：
	在传输层服务的基础上增加控制会话(Session)的机制，建立、组织和协调应用进程之间的交互过程。 

# 功能
	为用户建立、引导和释放会话连接
	
# 服务
	服务类型：双向同时(双工)、双向交替(半双工)和单向(单工) 
	同步 

```

##### 7、表示层

```markdown
# 主要任务：
	定义用户或应用程序之间交换数据的格式，提供数据表示之间的转换服务，保证传输的信息到达目的端后意义不变
	
# 功能
	对源站内部的数据结构编码，形成适合于传输的比特流(符合“传输语法”)，到了目的站再进行解码，转换成目的站用户所要求的格式(符合目的站“局部语法”)，保持传输数据的意义不变
	
# 服务：
	不同类型计算机中内部格式的转换、密码转换和文本压缩的转换 
```

##### 7、应用层

```markdown
# 主要任务
	为End-user的应用进程提供标准的网络服务和应用接口
# 功能
	提供各种不同的应用协议以满足应用进程的需求；
	为用户进程提供应用接口；
	识别并证实目的通信方的可用性；
	使协同工作的应用进程之间进行同步；
	为通信过程申请资源。

```



#### 2、TCP/IC参考模型

```markdown
1、TCP/IP不是一个单个的协议，而是由数十个具有层次结构的协议组成的一个协议集

2、TCP和IP是该协议集中的两个最重要的核心协议

3、TCP/IP是Internet上的标准通信协议集
  各层的协议要清楚，这个很重要
```

![image-20210927112611427](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210927112611427.png)

##### 1、TCP/IP的应用层

```markdown
# 主要任务
	应用层协议为文件传输、电子邮件、远程登录、网络管理、Web浏览等应用提供了支持
	有些协议的名称与以其为基础的应用程序同名

```

![image-20210927214856832](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210927214856832.png)

##### 2、TCP/IP的传输层

```markdown
# 传输层的主要功能：
	提供进程间可靠的传输服务
	
# 传输层提供了包括TCP和UDP两种传输协议
	这为网络层提供了网络数据传输的正确性，能让网络层不用校错而直接用UDP的方式传送。
	TCP:是面向连接的传输协议。
		在数据传输之前建立连接；
		把报文分解为多个段进行传输，在目的站再重新装配这些段；
		必要时重新传输没有收到或错误的段，因此它是“可靠”的。（收到错误的段，会把其驳回，不予接受，从而会再一定程度上造成了网速卡顿的情况）

	UDP是无连接的传输协议
		在数据传输之前不建立连接；
		对发送的段不进行校验和确认，因此它是“不可靠”的；
		主要用于请求/应答式的应用和语音、视频应用。
		（只管下载自己要下载的东西，不会考虑校验错之类的东西）
		
```

![image-20210927215706345](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210927215706345.png)

> TCP和UDP都用端口(port)号来识别应用层实体，以便准确地把信息提交给上层对应的协议（进程).

![image-20210927215807183](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210927215807183.png)

##### 3、TCP/IP的网络层

```markdown
# 主要功能
	把数据报通过最佳路径送到目的端
	寻址（IP地址）、路由选择、封包/拆包
	它提供的服务是：数据报服务和虚电路服务
# 网络层的核心协议--IP
	提供了无连接的数据报传输服务（不保证送达，不保证序，不保证无错）
        传输前不需建立连接
        提高了传输效率
# 网络层是网络转发结点（如路由器）上的最高层
	网络结点设备不需要传输层和应用层
```

![image-20210927220334428](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210927220334428.png)

##### 4、TCP/IP的网络接口层

```markdown
1、没有定义任何实际协议，仅定义了网络接口

2、任何已有的数据链路层协议和物理层协议都可以用来支持TCP/IP

3、优点：适应性强，灵活
4、缺点：不能利用已存在的某些有用的功能
	TCP/IP总是认为其下层是不可靠的（尽管可能已经足够可靠）

```

#### 3、TCP/IP与OSI/RM的对应关系

![image-20210927220920969](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210927220920969.png)



**两种模型的比较**

```markdown
# 相同点
	以协议栈为基础
	传输层之上的各层都是传输服务的用户，并且都是面向应用的用户。 
# 不同点
	OSI模型在前，协议在后，使得协议相对更加容易被替换为新的协议 ；TCP/IP模型在后，协议在前，模型不适合其他协议栈。
	OSI模型的网络层同时支持无连接和面向连接的通信，但是传输层上只支持面向连接的通信；TCP/IP模型的网际层上只有一种模式(即无连接通信)，但是在传输层上同时支持两种通信模式。

```

![image-20210927221052894](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210927221052894.png)



## 第四章：因特网及其应用

远程登陆：远程桌面连接（输入计算机名连接成就可以了）但是要

控制面板->远程设置->里面去允许远程登陆，这才可以远程登陆

查看计算机名称：

控制面板->系统和安全->单击“**系统和安全**”>“**系统**”。

在“查看有关计算机的基本信息”页上，在“**计算机名称、域和工作组设置**”下，可看到“**计算机全名**

### 1、域名系统（DNS）

```markdown
# 因特网编制机制：三种形式的地址管理机制
	1、域名地址：www.xjtu.edu.cn（协议+域名地址=http://+）
		层次化的地址，便于人们记忆
	2、IP地址：202.117.0.20（都是将域名地址转变为ip，这样路由器可以识别二进制访问到ip地址）
		32位逻辑编码，用来在因特网中定位主机和路由器的接口。 TCP/IP网络上的每台主机都必须有唯一的IP地址(共有的地址)。域名地址转换到IP地址由域名服务系统实现，这个转换过程又称为  域名解析	
	3、MAC地址：12-FA-9B-23-DB-11
		48位物理编码，用来在局域网中识别主机/路由器的接口。
 		IP地址转换到MAC地址由地址解析协议（ARP）实现(mac定位ip地址。

	---- DNS（RFC 1035）也是TCP/IP的应用层协议之一。它利用了UDP传输层协议，端口为53。
# IP地址的优点和缺点
	1、优点：IP地址更适合计算机处理
		IP地址包含足够的路由信息（路由器就是用的ip地址）。
	2、缺点：IP地址不适合人们记忆
			无法通过IP地址猜测主机的用途
				如一个主机到底是www服务器还是FTP服务器？
# 对IP地址的取长补短
	1、域名：层次化的主机名
	2、域名系统：任务是将域名解析为对应的IP地址。
	3、优点：
		使用方便，易于记忆。
		一致性好，不会随IP地址的改变而改变(ip地址可变，单域名不可变，通过固定域名来访问变化的ip地址)。

```

#### **域名空间（域名树）**

```markdown
域名空间分为若干层次：根域（顶级域）和次级域，一级域(国家)cn中国，uk英国，hk俄罗斯，com美国，二级级域(机构)edu教育机构，com是商业组织，四级域：主机名（www）三级域（名称：xjtu西安交大，llhc吕梁学院）

```

![image-20210928182519142](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20210928182519142.png)

#### 主机域名的构成

```markdown
1、主机名是由一系列由“.”分开的标签组成：
	每个标签不能超过63个字符；
	全部的标签不能超过255个字符；
	书写顺序是从主机开始直到域名树的根域为止。例如：
		www.xjtu.edu.cn
		netcourse.xjtu.edu.cn
2、域名是一个组织在域名空间中的名字：
	例如，西安交大的域名为xjtu.edu.cn。
		该组织中已注册的主机都以组织的域名为后缀。 

```

#### DNS系统的组织结构

```markdown
# DNS是一个分布式的数据库
	DNS使用了分布式的域名数据库，运行域名数据库的计算机称为DNS服务器。
	DNS服务器以层次型结构（和域名树相对应）分布在世界各地，每台DNS服务器只存储了一小部分DNS数据。
	每一个拥有域名的组织都必须要有DNS服务器，以提供自己域内的域名到IP地址的映射服务。
	例如，西安交大的DNS服务器为202.117.0.20，它负责进行xjtu.edu.cn域内的域名和IP之间的转换。
	通常每个域都有一台主DNS服务器，然后有一台或数台备份DNS服务器。
	西安交大的备份DNS服务器为202.117.0.21。
# DNS服务器分为三类
	1、本地域名服务器（Local Name Server）
		即每个组织/企业的DNS服务器。
	2、根域名服务器（Root Name Server）
		为下级域名服务器提供域名解析服务；
			它需要知道全部根域名服务器（和部分二级域名服务器）的地址。
		数量很少，由于历史原因，主要分布在北美地区。
	3、认证域名服务器（Authoritative Name Server）
		每台因特网中的主机都应该在所在域的域名服务器中注册，提供注册的域名服务器就是该主机的认证域名服务器。
		一般来说，认证域名服务器就是主机所在单位的DNS服务器
# DNS服务器的功能
	1、能够直接处理域内的域名解析请求。
	2、能够向其他DNS服务器发出查询请求来处理对其他域的域名解析请求。
	3、能够缓存对其他域的域名解析请求的结果(第一次访问外国域名访问很慢，会对其域名进行解析，对域名缓存，记录，再一次访问的时候变得很快）
	
# DNS服务的操作
	1、如果本地域名服务器不能解析域名，它就向根域名服务器询问；
	2、根域名服务器将告诉它与哪一个域名服务器联系；
	3、DNS再向该域名服务器进行查询；
	4、一个DNS请求可能要经过多个往返。
 	5、有两种查询DNS服务器的方法：递归查询和迭代查询。
		 递归查询迫使DNS服务器做出查询成功或失败的响应。在递归查询中，如果需要的话，DNS服务器必须与其他的DNS服务器通信。从其他的DNS服务器收到成功响应的信息后，它就将响应返回给客户机。
		在迭代查询中，DNS服务器根据本地的区域文件或本地缓存文件，提供最好的信息。如果名字服务器没有能够回答解析的任何信息，它不会仅仅返回一个简单的否定信息，它会试着在本地域之外查找信息，为了解析一个名字，它可能会查询很多外部的DNS服务器。  

# 域名解析的例子
	某个用户要浏览西安交大的主页，用户主机（假定为A）必须获得www.xjtu.edu.cn主机（以下简称为xjtu）的IP地址。
	解析过程：解析的是外国的，会慢，查找的慢嘛
		1、A向本地域名服务器DNS1查询请求；
		2、如果DNS1上有xjtu的记录，就立即将JD的IP地址返回给A；
		3、如果DNS1上没有xjtu的记录，DNS1就会向根域名服务器发出查询请求；
		4、根域名服务器把负责cn域的域名服务器B的IP地址告诉给DNS1；
		5、DNS1向B查询，获得负责edu.cn域DNS服务器C的地址；
		6、DNS1向C查询，获得负责xjtu.edu.cn域DNS服务器D的地址；
		7、DNS1向D查询，即可获得www.xjtu.edu.cn的IP地址
```

> 在命令行下可用nslookup命令进行DNS查询
>
> 

tips

```markdwon
连接校园网-查出来的是学校的dns,手机的网是人家移动公示的，路由器查出来的，是人家对应的公司的，比如电信的路由器，对应的dns是人家电信公司分配的。
```

```markdown
# 域名数据库中的记录类型
	A记录（Address记录）
		A记录是用来指定域名对应的IP地址
	NS记录（Name Server记录）
		域名服务器记录，用来指定该域名由哪个DNS服务器来进行解析
```

![image-20211006193554818](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006193554818.png)

```markdown
# DNS与ARP的比较
	地址类型
		DNS:域名（应用层地址）->IP地址（网络层地址）
		ARP:IP地址（网络层地址）->Mac地址（数据链路层地址）
	作用范围
		DNS：全局（整个因特网）
		ARP：本地（仅限于LAN内部）
	工作方式
		DNS：本质上是对一个分布式数据库的查询过程
		ARP：LAN内部的广播查询，去匹配每个mac对应的主机地址

```

### 2、电子邮件

```markdown
# 电子邮件是因特网上最典型的服务之一：
	因特网中出现最早，应用最普遍、最广泛
	因特网用户中90％以上使用过电子邮件
		方便、快捷、廉价
# 电子邮件系统的组成
	1、用户代理（User Agent）
		功能：编辑、发送、接收、阅读和管理电子邮件。
		常见的用户代理有：
			Outlook、Outlook Express、Foxmail等
	2、邮件服务器
		功能：类似“邮局”，接收和转发电子邮件，向发信人报告邮件发送状态
		按照客户服务器方式工作
			既是客户，又是服务器
	3、电子邮件协议
		1、发送/转发邮件
			- smtp
			- mime
		2、读取邮件
			- pop3
			- imap4
# 电子邮件地址
	1、电子邮件用户必须有一个电子邮件地址
		许多网站提供免费电子邮件服务，需要的话可到这些网站上申请一个邮箱（电子邮件地址）。
	2、电子邮件地址由两部分组成：
		用户名
		邮箱所在的邮件服务器的主机域名
	3、用户名和邮件服务器域名之间用“@”隔开
	     用户名@邮件服务器域名
	例如：
		wgchen@mail.xjtu.edu.cn

# 简单邮件传输协议SMTP
	1、SMTP是因特网上通用的电子邮件传输协议。它的特点是简单明了，容易实现。
	2、SMTP定义了邮件格式及如何通过TCP连接传输邮件。
	3、SMTP使用25(很重要)号端口在两个邮件服务器之间建立TCP连接。
	4、SMTP协议由两个文档进行描述：
		RFC821：描述了邮件服务器之间如何转发邮件；
		RFC822：定义邮件信息的格式。
	5、SMTP规定邮件的全部内容（包括附件）——无论是什么类型的数据——都必须转换成7位ASCII码进行传输。

# 邮件格式
	标准的电子邮件信息由两部分组成：
	1、邮件头（header）：相当于“信封”，主要包括
		收件人地址	
		投递日期
		邮件主题
		发件人地址
	2、邮件体（body）：邮件正文，相当于装在信封内的信。
	
	一、邮件头信息都由一些关键词引导。邮件正文则没有任何关键词引导，正文是用户编辑邮件时输入的。
	二、邮件头中的一些主要关键词的含义是：
		Received：接收邮件的路径、日期、时间以及邮件代理程序的版本号。
       From：表示邮件发送者，包括邮件地址和发送方的“真实姓名”。
        Date：发信时间。
		  Message-ID：由传输代理分配给该邮件的唯一标识。
        To：收件人的电子邮件地址。
  		  Subject：邮件主题，是发件人写的，告诉收件人该邮件的目的。
		  Content-type：邮件正文的类型，是文本还是MIME格式。
        Cc：表示抄送，它是“Carbon copy”的缩写，意为“复写副本”，
        它用来指定那些将收到该邮件副本的人的邮件地址。
# SMTP通信
	支持SMTP协议的邮件服务器之间采用客户/服务器方式工作，连接发起方称为客户，接收方称为服务器。一旦连接建立，邮件服务器之间通过SMTP协议进行对话，完成邮件的转发功能。
	SMTP定义了几个非常简单的命令用来进行邮件的发送，其中包括：
		HELO
		MAIL FROM
		RCPT TO
		DATA
		QUIT
		
# SMTP的特点
	1、电子邮件无论内容多少（包括附件），均使用一个报文（Message）发送。
	2、所有的邮件内容，必须使用ASCII代码传送。
	3、所有的二进制文件内容必须使用MIME格式转换成ASCII代码（膨化处理）。

# 邮件读取协议
	常用的有：POP3和IMAP
	1、POP3（邮局协议）
		①基于TCP协议
		②客户/服务器方式
			客户端程序（Outlook Express、Foxmail等）
			服务器程序（Exchange等）
			客户与服务器建立TCP连接后才能读取邮件
		③功能：
            为用户提供邮箱
            保存收到的邮件
            把邮件传输给用户（邮件在客户端脱机处理）
            邮件传输给用户后，POP服务器一般不再保留
    2、IMAP(因特网报文存取协议)
        ①基于TCP协议（同POP3）
        ②客户/服务器方式（同POP3）
        ③功能
        	为用户提供邮箱
        	保存收到的邮件
        	用户可直接操纵IMAP服务器上自己的邮件文件夹
        		新建分类文件夹，移动邮件，删除邮件，查找邮件等
        	仅需要打开邮件时，邮件才传输到客户端
        		邮件将一直保存在IMAP服务器上，除非用户明确地发出删除命令

```

**电子邮件的发送和接受过程**

![image-20211006194536196](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006194536196.png)

![image-20211006195545806](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006195545806.png)

### 3、文件传输（FTP）

```markdown
# FTP是什么？
	1、FTP是File Transfer Protocol的英文缩写，即“文件传输协议”。
	2、用于在计算机之间传送文件
		- 把文件从本地主机传送到远程主机称为“上载”
			Upload，Put
		- 把文件从远程主机传送到本地主机称为“下载”
			Download，Get
	3、FTP可以传输各种类型的文件：
		文本文件（ASCII）、二进制文件（Binary）；
		压缩文件、非压缩文件。
	4、登录FTP服务器的用户需要注册才能登录，但有的FTP服务器也允许匿名（Anonymous）登录。
	5、ftp://ip地址
# 匿名登陆FTP
	ftp ftp.xjtu.edu.cn
	Username: anonymous
	Password: test@xjtu.edu.cn
# FTP的工作原理
	1、FTP基于TCP协议，使用TCP协议实现文件的传输。
	2、FTP以客户/服务器方式工作：
		①FTP客户程序，如Cuteftp等，运行在用户计算机上
			用户通过它发出传输文件的请求
		②FTP服务程序，如Serv-U等，运行在服务器上
			接收并响应客户程序的请求，把指定的文件发送到客户端
	3、在进行文件传输时， FTP的客户和服务器之间要建立两个TCP连接：
	①控制连接（Control Connection）：
		客户程序与FTP服务器的端口21建立控制连接,并在整个FTP会话过程中维持连接；
		控制连接用于传输请求和应答信息；
		由FTP客户端发起控制连接。
	②数据连接（Data Connection）：
		数据连接用于传输文件；
		每传输一个文件都要建立一个数据连接（在FTP服务器的端口20）；
		由FTP服务器发起数据连接

```

![image-20211006200935356](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006200935356.png)

```markdown
# FTP的文件传输过程
	1、建立控制连接（客户端发起）
		（1） 客户端发送一个TCP SYN（TCP同步）包给服务器端，目的端口为21，源端口为一个临时端口； 
		（2）服务器端发送SYN ACK（同步确认）包给客户端，源端口为21，目的端口为客户端上使用的临时端口；
		（3）客户端发送一个ACK（确认）包。
			控制连接建立后，客户端使用这个连接来发送FTP命令，服务器端使用这个连接来发送FTP应答。 
	2、建立数据连接
		当用户发出一个文件传输请求时，客户端软件通过控制连接向服务器发出一个PORT命令，在PORT命令中指定一个临时端口，目的是希望服务器在建立数据连接时使用这个临时端口； 
		（1）服务器端发送一个SYN包给客户端，源端口为20，目的端口为客户端在PORT命令中指定的临时端口；
		（2）客户端发送一个SYN ACK包，源端口为临时端口，目的端口为20 ；
		（3）服务器端发送一个ACK包。
	3、文件传输 
		数据连接建立后，发送数据的一方使用这个连接把文件传送给对方。 
	4、断开数据连接
		当数据传输完成后：
		（1）发送数据的主机发出一个FIN命令来结束数据连接；
		（2）接收方以ACK确认；
      （3）接收方紧接着也发送一个FIN命令；
      （4）发送数据的主机以ACK确认。 
	5、断开控制连接
		FTP会话结束后：
        （1）客户端以FIN命令来关闭控制连接
        （2）服务器端以ACK确认；
        （3）服务器端发送一个FIN；
        （4）客户端以ACK确认。 


```



## 第五章：网络互联与因特网基础

### 1、基本概念

```markdown
# 网络互联的动力
	更大范围的资源共享
# 网络互联
	host-LAN 、LAN-LAN/WAN
# 网络互联的实现层次
	物理层、数据链路层、网络层、网络层以上
```

> 物理层；中继器/集线器

```
在电缆段之间复制比特流。
      没有地址概念，因此从本质上不能算是网络互连
```

![image-20211004105727804](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211004105727804.png)

> 数据链路层：网桥/交换机

```
在网段之间转发数据帧。
根据数据帧中的信息（MAC地址）进行转发
```

![image-20211004110034082](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211004110034082.png)

> 网络层：路由器

```
在网络之间转发报文分组。
根据分组中的逻辑地址（IP地址）进行转发。
```

![image-20211004110116757](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211004110116757.png)

> 更高层：网关

```
连接·不同的体系结构的网络
```

![image-20211004110216800](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211004110216800.png)

### 2、LAN的互联

```markdown
本地互联
      特点：范围有限、主干（Backbone）采用局域网技术，
                  如FDDI、Ethernet、Token Ring
       互联层次：链路层（网络层）
       互联设备：网桥、交换机（有时可采用路由器）    
 远程互联
      特点：范围大、主干采用广域网技术，如ISDN、X.25、DDN、
                  ATM、FR、ADSL等
       互联层次：网络层或更高层（链路层）
       互联设备：路由器、网关（有时可采用远程网桥）

```

![image-20211006203040030](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006203040030.png)

**网络互联的归纳**

```markdown
1、物理层：使用中继器或集线器在不同的电缆段之间复制位信号，无寻址功能；
2、数据链路层：使用网桥或交换机在局域网之间存储转发数据帧，用MAC地址寻址；
3、网络层：使用路由器在不同的网络之间存储转发分组，用IP地址寻址；
4、传输层及应用层：使用网关提供更高层次的互连，用端口号或其他特定标识寻址。

```

### 3、因特网体系结构

```markdown
1、因特网是世界上最大的互联网络，具有开放性。
2、开放网络的四项原则：
	小型化、自治：每个网络可以自行运作，当需要进行网间互联时无需改变其内部结构。
	尽力而为的服务：互联网络仅提供尽力而为的服务，如果需要可靠的通信，则由发送端通过重传丢失的报文来实现。
	无状态路由器：互联网络中的路由器不保存任何现行连接中已经发送过的信息流状态。
	非集中控制：在互联网络中不存在全局性的控制机制。
3、因特网协议栈和协议数据单元
```

![image-20211006203713661](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006203713661.png)

### 4、因特网的接入

```markdown
1、因特网的接入是指如何把用户的计算机连接到因特网的接入点——因特网的边缘路由器

2、因特网接入采用了广域网连接技术。

3、从用户类型划分，因特网接入分为：
	住宅（居民区）接入
	机构接入
	移动用户接入
```

```markdown
# 居民区因特网接入：拨号和ADSL
	1、模拟调制解调器通过电话网拨号上网
		用户计算机通过电话拨号与因特网服务提供商建立连接，在用户本地环路上传输的是模拟信号
		拨号接入的速率最高不超过56kb/s
   2、ADSL（非对称用户线路）
		在用户本地电话线环路上采用数字信号传输技术，能够在一条上同时提供话音服务和数据通信服务，但其下行传输速率可达到8Mb/s，上行传输速率也能达到将近1Mb/s
		上下行速率不对称的特点非常适用于上网目的以因特网浏览为主的用户 

# 居民区因特网接入: 线缆调制解调器
	HFC：Hybrid Fiber Coax（光纤同轴电缆混合网络）
		非对称：下行可达10Mb/s，上行为1Mb/s
	HFC将家庭用户连接到 ISP的路由器
		若干个家庭用户共享10Mb/s访问带宽；
		关注点：拥塞，规模控制问题。

# 机构接入网络：局域网
	1、公司/大学 局域网 (LAN) 将端系统连接到端接路由器
	2、以太网(Ethernet): 
		共享或专线电缆将端系统连接端系统和路由器
		10 Mb/s, 100Mb/s, 1Gb/s 以太网
	3、应用: 企事业单位, 家庭用户 普遍使用的LAN

# 无线网络接入：
	1、共享的无线访问网络把端系统连接到路由器
	2、无线LAN
		- 使用无线频谱替代有线介质
		- e.g，802.11a/b/g
		- 11Mb/s、54Mb/s
	3、广域无线访问
		CDPD：通过蜂窝式网络无线访问ISP路由器

```

> 蜂窝网络：

```markdown
蜂窝网络（英语：Cellular network），又称移动网络（mobile network）是一种移动通信硬件架构，分为模拟蜂窝网络和数字蜂窝网络。 由于构成网络覆盖的各通信基地台的信号覆盖呈六边形，从而使整个网络像一个蜂窝而得名。 ... 我们可以把基站子系统看作是无线网络与有线网络之间的转换器
```

### 5、因特网的链路层和网络层

```markdown
# 因特网的链路层协议包括：
	SLIP、PPP、HDLC
	相关的议题还包括：通过局域网接入因特网时ARP与IP的交互问题。

# 因特网的网络层协议主要包括：
    互联网络协议IP
    网络控制信息协议ICMP
    路由协议
    组播协议IGMP
 
 # 点对点的数据链路协议
 	一方发，一方收；一条链路：比广播信道简单的多
		1、无需介质访问控制（局域网需要）
		2、不必进行MAC寻址
		3、e.g.，拨号链路，ISDN 线路等
	常见的点对点数据链路控制协议
		SLIP
		PPP
		SDLC(SNA的面向比特的数据链路规程)
		HDLC(ISO高级数据链路控制)

# PPP设计要求
	帧封装: 将网络层的分组封装到数据链路层的帧中 
		①同时可以承载任意网络协议的网络层数据 (不仅仅是 IP)
		②提供向上分用的能力
	位流透明: 在数据字段中，必须能携带任意组合的位流
	错误检测 (但无需校正)
	网络层地址协商: 客户端可以学习/配置对方提供的网络地址
# PPP无需做的工作
	1、错误校正/恢复
	2、流量控制
	3、有序递交 
	4、支持多点链路 (e.g.，轮询)
	错误恢复、流量控制、分组的有序递交都被移到更高层（在端点，或者说端到端）去解决了!

# PPP数据帧
	Flag：帧定界符(7EH)，开始和结束标志
    Address：固定为FFH
    Control：缺省为03H，表示为无编号帧
	Protocol：数据类型，即帧中携带的数据属于哪一个上层协议 (LCP, IP, IPCP, …) 
	Info：所携带的上层数据
	Check：CRC校验和，用于进行错误检测

```

![image-20211006210113963](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006210113963.png)

```markdown
# 字节填充
	“数据透明” 要求：数据中必须可以包括帧中flag字段的固定位模式：01111110（7EH）
	Q: 如何判断这个<01111110>到底是数据还是flag?
	A: 异步链路采用字节填充法解决（同步链路则使用与HDLC相同的位填充法（位填充，增加1~2位来区分7EH））
		发送方：
			数据中的所有<01111110>字节都用2字节序列<01111101, 01011110>（7DH, 5EH）代替,双字节模式
			数据中的所有<01111101>（7DH）都用2字节序列<01111101, 01011101>（7DH, 5DH）代替
		接收方：
			进行相反的操作
```

![image-20211006210318113](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006210318113.png)

### 6、网络层协议组成

```markdown
因特网的网络层协议分成四部分：网际协议（IP）、路由选择协议、网络控制信息协议（ICMP）和组播协议（IGMP）。
	网际协议：决定了网络层的编址机制，数据报的格式（网络层的PDU），各节点根据数据报的字段所应采取的动作。IP协议由两个版本：IPV4,IPV6
	路由选择协议：决定数据报在发送过程中由信源到信宿所经过的路由器。
	网络控制信息协议：可以为用户提供网络中的各种运行信息。
	组播协议：由于数据报的发送无须建立过程和响应信息，因此可以支持因特网上的多点同时传送，但由于网络层协议设计上的限制，多点传送解决起来比较复杂。

```

#### 1、网际协议IP–Internert Protocol

```markdown
# IP是因特网的网络层中最重要的协议
    提供数据报（Datagram）的投递服务（主机到主机）
    在不同的数据链路层上进行数据转发操作
# IP的数据报投递服务是非连接的，不可靠的
	(要的主要是速度，至于缺点由上级弥补)
	非连接
		数据报之间没有相互的依赖关系；
		不能保证报文的有序投递。
	不可靠
		数据报的投递没有任何品质保证（QoS），
		数据报可能被正确投递，可能被丢弃。

# IP地址
	IP地址: 32bit的逻辑地址, 用来标识主机或路由器的网络接口；（每位都是8位，4*8=32）
	网络接口: 用于连接主机与路由器之间的物理链路：
		1、路由器有多个接口
		2、主机可能有一个，也可能有多个接口
		3、IP地址只与设备的网络接口有关
	IP地址书写方法：
		32bit划分为4个字节（一字节8位）
		写成点分的4个十进制数
```

![image-20211006211425996](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006211425996.png)

```markdown
# IP地址
	1、IP地址包括2个部分: 
		网络地址（网络号）
		主机地址（主机号） 
	2、网络是什么? （从 IP 地址的视角）
		具有相同网络地址的设备接口，或不经过路由器就可以物理上相互通达的设备
	由3个IP网络组成的互联网
	(对于以223开头的IP地址，前24位为网络地址 )
# 分类编址
```

> A类，最大主机数为2^24-2=16777214

![image-20211006211818235](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006211818235.png)

> B类,最大主机数为2^16-2=65534

![image-20211006212223986](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006212223986.png)

> C类：最大主机数为2^8-2=254

![image-20211006212400248](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006212400248.png)

> D类，主机地址标识成0就是网络地址

![image-20211006212431443](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006212431443.png)

```markdown
# 保留的IP地址
```

![image-20211006212642839](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006212642839.png)

#### 2、划分子网

```markdown
# 为什么要划分子网？
	1、IP分类不合理，地址空间利用率低
		美国的某些机构拥有的地址空间甚至比其他一些国家的全部地址空间还大(带有垄断性)
	2、每个网络都指定一个网络地址将使路由表太大
		每个网络都需申请ip地址，将让路由表存储信息太大
		增加了路由器成本
		查找路由耗时增加
		路由器之间交换的路由信息增加
	3、两级IP地址不够灵活
		不能充分利用已申请到的地址资源扩充新的网络
如何在现有的地址范围中建立多个网络？（划分子网）

# 划分子网
	又称子网寻址或子网路由选择
	方法：
		从IP地址的主机编号部分“借用”若干位作为子网编号
			主机编号部分相应缩短
		eg，如图，以下是借用三位的
```

![image-20211006214312279](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006214312279.png)

```markdown
# 子网的特点
	1、多个子网可以运行在同一物理网络上。
	2、划分子网后，原来的网络对外仍呈现为一个完整的网络，外面看不见其内部的子网结构。
	即：划分子网完全是该网络内部的事务，与外部无关
```

![image-20211006214615996](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006214615996.png)

![image-20211006214651951](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006214651951.png)

![image-20211006214709693](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006214709693.png)

![image-20211006214737448](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006214737448.png)

#### 3、子网掩码

```markdown
# 子网掩码的作用
	使网络内的计算机了解子网划分的结构
	使边缘路由器了解子网划分的结构
# 子网掩码的格式
	子网掩码也是32bit长的二进制数，由一串连续的1后跟一串连续的0组成；
	前面的1与网络号和子网号对应，后面的0与主机号对应。如前面的例子：
    子网结构为：   00001010 00000101 ss xxxxxx xxxxxxxx
    子网掩码为：   11111111 11111111 11 xxxxxx xxxxxxxx
    写成十进制数为： 255.255.192.0

# 不划分子网是，各类ip地址默认的子网掩码为
	A类：255.0.0.0(网络的前八位全0，子网掩码前八位全1)
	B类：255.255.0.0
	C类：255.255.255.0
# 如何计算子网的地址，已知IP地址和子网掩码
	用子网掩码和IP地址“相与”（AND操作），结果就是子网地址。计算出来后可以计算出来属于哪个网络

```

![image-20211006215227093](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211006215227093.png)

> 如何通过ip地址和子网地址，获得主机号？
>
> 

```markdown
网络ip地址192.1.10.1，子网掩码地址10.5.19.0
算出10.5.100.1子网地址为：10.5.64.0
那么主机号=网络ip地址的主机地址-子网地址的主机地址
=主机号 1- 0 = 1，所以主机号=0
```

```markdown
# 如何在网络拓扑图中找出所有的网络？
	1、拿掉路由器；
	2、整个网络形成了若干个“被隔离的网络孤岛”；
	3、每个“孤岛”就是一个网络
```

#### 4、IP编址

```markdown
# ISP如何获得整块的地址？
	ICANN
		-分配地址
		-管理DNS
		-批准域名，解决纷争
# 单位或企业如何获得网络地址
	向ISP请求（在单位内部，则向网络中心申请）
	
# IP数据包格式
```

![image-20211007101626076](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211007101626076.png)

```markdown
1、组成
	1、数据报头和数据域组成
		数据报头由长度为20字节固定部分和可变长度的选项部分数据组成
		
	2、version:是版本号，现在广泛使用的是第四版的IP(IPv4)
	3、IHL:指明数据包的长度（单位32位比特）
	4、type of service指明需要的服务类型
	5、total length指明了IP书报的长度，单位是字节
	6、identification 是数据报标识 
	7、DF:指明路由器要不要分段
	8、MF:说明该片段是不是数据报的最后一个片段，最后一个数据段比特置0，否则置1
	9、fragment offset 表示该片段在数据报中的位置（8B作为基本单位）
	10、Time to live域 是一个计数器，用来限制数据报的寿命
	11、protocol:指明传输层使用的协议（TCP/UDP）
	12Header checksum数据报的检验和
具体参考书本P142
	

# IP路由选则
	1、为分组选择一条从源主机到目的主机的最佳路径。
		可选路径不止一条
		路径可能要跨越多个网络
	2、 网络中实现路由选择功能的设备是路由器。
		对每一个接收到的分组，路由器必须确定从哪条路径将其转发出去。
 	3、路由器根据其内部保存的一张路由表转发分组。
		路由表中存放了到达其他网络的路由信息。
			①目的网络地址 
			②下一跳（路由器）地址（Next Hop）
			③其他（各种标志、子网掩码、接口、…）
# 路由表的基本内容
```

![image-20211007103134383](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211007103134383.png)

```markdown
# 如何根据路由表进行路由选则
	1、路由选择：根据路由表找到一条到达目的网络的路径（实际上是查找输出接口）。
	想一想：为何不是“找到一条到达目的主机的路径”？
		从两个方面考虑：
			如何减小路由表中的路径数量（在因特网的骨干链路中尤其重要）
			与目的主机的连接只有两种类型：点到点链路和广播型网络（LAN）
		有些情况下，路由表中也可设置到达目的主机的路由。
	2、路由选择的基本方法：
		①取出收到的分组中的目的IP地址，并提取出目的网络地址；
		②用目的网络地址在路由表中查找：
			若目的网络与路由器直接相连，则“直接交付”；
			如果找到匹配的表项，则将分组发送到该表项指定的下一跳路由器；
			如果未找到，则搜索路由表中有无“default”的表项：
				如果有，就将将分组发送到该表项指定的下一跳路由器；
				如果没有，则发送一个“主机不可达”或“网络不可达”的出错信息给发出该分组的计算机。 


# 路由表的维护
	1、路由表如何建立？如何根据网络的变化进行更新？
		1、静态路由：由网络管理员设置并随时更新
			网络管理员的工作负担重，容易出错，适应性差；
			简单、开销小，只适用于小型网络。
		2、动态路由：路由器运行过程中根据网络情况动态地维护
			减轻了网络管理员的工作负担重；
			实时性好，适应性好；
			能够满足大型网络的需要；
			因要搜集网络运行状态，网络开销有所增加，实现也比较复杂。
		3、因特网中的路由器采用的都是动态路由。 
# 动态路由的实现
	动态路由（建立、维护、更新）需要借助路由协议实现，路由协议有两大类：
	1、全局路由协议
		①依据完整的网络全局拓扑信息计算到达各个网络的最佳路径。
		②因为本协议需要了解每条网络链路的状态，故也称其为链路状态路由协议（Link State Routing Protocol，L-S）。
		③路由计算在所有路由器中完成，运行L-S协议的每个路由器都要向所有路由器发送与自己相邻的路由器的链路状态信息，内容包括：
			路由器所连接的网络链路；
			该链路的状态：连通性、开销、速度、距离、时延等信息。
		④通过互相通告链路状态，每个路由器最终都可以建立一个关于整个网络拓扑结构的数据库，再使用Dijkstra算法即可计算出到达各网络的最佳路径。 
		⑤典型的链路状态路由协议是OSPF（Open Shortest Path First）
	2、局部路由协议
		①通过一系列重复的、分布的方式来计算最佳路径。
		②每个路由器开始只知道与其直接相连的链路的信息。通过与相邻路由器的通信和一系列反复的计算，路由器可以逐渐获得到达某些网络的最佳路径信息。
		③因为需要了解每条链路的距离，故也称其为距离矢量路由协议（Distance Vector Routing Protocol，D-V）。
		④距离矢量协议计算网络中链路的距离矢量，然后根据计算结果构造路由表。每一个路由器工作时会定期向相邻路由器发送消息，消息的内容就是自己的整个路由表，其中包括：
			目的网络的地址；
			到达目的网络的下一跳路由器地址；
			到达目的网络所经过的距离。
		⑤运行距离矢量协议的路由器会根据相邻路由器发送过来的信息，更新自己的路由表。 
		⑥典型的距离矢量路由协议是RIP（Routing Information Protocol）
		
# IP路由协议具有的共性
	1、动态地学习、计算到达网络中各子网的路由并插入到路由表中。
	2、如果到达一个子网有多条合法路由，那么将最好的一条放到路由表中。
	3、当路由表中的路由不再合法时，则通告给其他路由器，并从自己的路由表中删除该路由。
	4、尽快地加入新的路由，或者用更好的路由替代失效的路由。
	5、阻止循环路由
	
# IP路由协议的层次
	1、因特网被划分为许多自治系统（Autonomous System，AS），每个AS都是一个互联网络。
	2、AS的特点：
		它有权自主地决定在本系统内采用何种路由选择协议。
		一个AS内的所有网络都属于一个组织或机构管辖并在本AS内是连通的。
	3、根据路由协议是为AS内部的路由优化还是为AS之间的路由优化，因特网把路由协议分为两大类：
		内部网关协议（IGP）：如RIP、OSPF等；
		外部网关协议（EGP）：如BGP（边界网关协议）。

```

#### 5、ARP协议和RARP协议

**ARP协议**

```markdown
# ARP将一个已知的IP地址映射到MAC地址

# 映射方法
	已知：IP地址
	1）检查本地ARP高速缓存表，若找到IP地址对应的表项，则取出表项中的MAC地址；
	2）若IP地址不包含在表中，就向网上发广播来寻找。具有该IP地址的目的站用其MAC地址作为响应。

# ARP只能用于具有广播能力的网络

# 为何要进行地址映射？
	在因特网中，数据分组传输使用的是IP地址（逻辑地址）；而在局域网中，传输数据时需要使用物理地址（MAC地址）。
	许多因特网的主机位于局域网中，当数据分组到达局域网时，需要把IP地址转换成MAC地址，然后把分组封装在局域网链路层的帧中，才能发送到该主机。

```

操作实例

![image-20211011114046703](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211011114046703.png)

> ARP与IP地址的交互
>
> 由R对A到B进行路由过程

![image-20211011115803564](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211011115803564.png)

![image-20211011115834717](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211011115834717.png)

![image-20211011115857169](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211011115857169.png)

![image-20211012181636108](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211012181636108.png)

```markdown
	1、实际上，发送主机在发送分组之前，就已经知道目的主机不在本地LAN上（只要比较目的主机和发送主机的IP地址中的网络地址部分便可得知），所以必须将分组发送给路由器，由路由器进行转发。
		路由器的IP地址（Windows中称为缺省网关）在发送主机中已经预先设置（在本例中为111.111.111.110）
	2、现在的问题是：发送主机如何得到路由器接口的MAC地址呢cmd命令输入 arp –a，可以得到路由器接口。当然是使用ARP协议！
	3、一旦发送主机获得了路由器接口的MAC地址，就可以生成一个数据帧，发送给路由器
	4、LAN1上的路由器接口收到了发给它的数据帧后，将封装在其中的分组提交给网络层。这样，分组就成功地从主机发送到了路由器上！
	5、接下来，路由器还必须将分组发送到目的地。
		①路由器首先需要选择适当的接口来转发，这项工作路由器可以通过查询路由表来完成。路由表告诉路由器：“需要通过222.222.222.220接口转发该分组”。于是，路由器把分组送到该接口。
		②最后，接口将分组传送给其适配器，组成新的数据帧，并广播到LAN2中。

	6、这时，数据帧的目的MAC地址才是真正的最终目的主机的MAC地址。
		①路由器又是如何知道最终目的主机的MAC地址呢？还是使用ARP协议！
		②路由器通过数据报中的目的IP地址和ARP协议来得到目的主机的MAC地址。

```

**RARP协议**

> 把MAC地址映射成IP地址

```markdown
	1、用于无盘工作站环境
		无盘工作站没有磁盘，配置的IP地址无法保存。
	2、RARP的基本思想：
		①网络中配置一台RARP服务器；
		②RARP服务器中有一张MAC地址与IP地址的映射表；
			由网络管理员预先配置好
		③地址映射过程：
			无盘工作站启动时，从硬件配置中读出MAC地址，并将其封装在RARP请求报文中，广播到网上；
			RARP服务器收到请求报文后，在映射表中检查有无对应表项。若找到，将对应的IP地址装入响应报文中发回给请求者。
	3、RARP也只能用于具有广播能力的网络。

```

#### 6、IP地址如何分配

```markdown
# 主机的IP地址有两种分配策略：
	1、由网络管理员手工分配（静态分配）；
	2、动态分配：DHCP协议（Dynamic Host Configuration Protoco，动态主机配置协议），租用人家的ip地址去上网。租完了要还给人家用。

		①DHCP功能：是一个局域网的网络协议，使用UDP协议工作
		②DHCP客户机以广播的形式发送DHCP,disvover信息来寻找DHCP服务器
		③网络中接收到DHCp 
			* 网络中需设置一台DHCP服务器；
			* 网络管理员在DHCP服务器中预先定义一个IP地址池。
			* 分配过程：
			 	- 需要申请IP地址的主机在网络中广播 “DHCP discover” 报文
				- 网络中的DHCP服务器用 “DHCP offer”报文响应
				- 主机发送IP地址请求：“DHCP request” 报文
				- DHCP服务器从地址池中取出一个未分配的IP地址发送给请求者：“DHCP ack” 报文 

```

#### 7、ICMP协议

```markdown
# 作用
	用于主机、路由器、网关之间交换网络层信息
		报告错误: unreachable host, network, port, protocol
		进行request/reply 应答(ping命令)

# 同处于网络层但“凌驾”于IP之上：
	ICMP报文需要封装到IP分组中进行传输
# ICMP报文
	type和code两个字段的含义见如下图
```

![image-20211012182841831](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211012182841831.png)

![image-20211012182854507](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211012182854507.png)

![image-20211012182904879](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211012182904879.png)

#### 8、IPv6

```markdown
# 1、初始的动机
	IPv4的32-bit地址空间预计在2008年将全部分配完毕。
    IPv6的地址多达2128（340万亿亿亿亿），地球上每平方米可分配0.668亿亿亿个IP地址。

# 2、其它动机
	①改革首部格式帮助加速处理和加速转发；
	②改革首部，以实现 QoS；
	③新型 “任意播-Anycast”地址的实现：实现在若干备份服务器中寻求“最佳”路由。

# 3、IPv6的分组格式
	固定长度的40 byte首部；
	不支持分组的分割。
# 4、IPv6首部
	Priority:  确定数据流中各分组的优先级
	Flow Label:  标识不同“flow”中的分组，以便按各自的“需求"进行处理。
	Next header:  后面的附加报头（如果有的话）的类型; 对于最后一个报头，则用来说明传送数据的上层协议是什么

```

![image-20211013174119329](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013174119329.png)

```markdown
# 5、其它不同于IPv4的修改
	1、Checksum:完全取消，以减少每个步跳上的处理时间
	2、Options:允许使用，但是不再是首部的内容，而是由"Next Header"字段说明
	3、共性：都是美国掌控的，我国要用的话，是需要交钱的，平均一年6亿
	4、ICMPv6:ICMP的新版本
		新增报文类型，eg:"Packet Too Big"
		组播管理功能
# 6、从IPv4向IPv6的迁移
	1、并不是所有的路由器都能够在同一时刻升级
		不能采用 “易帜日”的办法；
	2、但是网络如何能够在IPv4和IPv6路由器共存的情况下运行? 
	两种建议途径
		双栈(Dual Stack)：某些具有双栈 (v6, v4)的路由器 可以将两种地址格式进行 “翻译-translate” 
		隧道(Tunneling)：IPv6可以作为IPv4的载荷通过IPv4的路由器，即把IPv6的分组封装在IPv4的分组中在IPv4网络中传输。

```

> 双栈方式

![image-20211013174810039](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013174810039.png)

> 隧道

![image-20211013174949836](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013174949836.png)

```markdown
# 7、IPv6影响下一代互联网
	1、IPv6可以为任何你所能想象到的东西提供固定的IP地址
		IPv6不仅可以为每一台网络终端提供了固定的IP地址，而且提供了人与人、人与物乃至于物与物之间通信的可能。 
	
	2、移动通信行业将是IPv6最早和最大的受益方
		移动IPv6适用于数量庞大的移动终端，它提供了足够的地址空间可以为在公共互联网上运行的每个移动终端分配一个IPv6地址。在全球范围内解决了有关网络和访问技术之间的移动性问题。

```

### 7、因特网传输层协议

```markdown
# 1、作用
	提供运行在不同主机中进程间的逻辑通信；
# 2、运行系统
	传输协议仅运行在端系统中
```

![image-20211013175444649](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013175444649.png)

```markdown
# 3、传输 vs. 网络层服务
	1、网络层: 在端系统间进行通信；
	2、传输层: 在进程间进行通信；
	3、传输层依赖于网络层的服务，反过来又加强了网络层的服务。
# 4、Internet的两类传输服务:
	1、TCP
		可靠的，按序点对点递交的传输服务
		特点：
			*拥塞控制
			*流量控制
			*连接建立
	2、UDP
		不可靠的，无序的点对点或广播递交：UDP
		不能提供的服务有
			实时性（不能能保）
			宽带承诺
			可靠的广播通信
```

#### 分用/复用

```markdown
# 1、回顾：segment（段）
	-传输层实体间交换数据的单位
# 2、分用：
	将接收到的段提交给正确的应用层进程
```

![image-20211013180238401](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013180238401.png)

```markdown
# 3、复用
	传输层从多个应用进程获取数据，然后对它们进行封装。
	
# 4、复用/分用：
	基于发送方、接收方的端口号和IP地址：
		源/目的端口号存在于每个段中
```

![image-20211013180447350](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013180447350.png)

#### 传输层端口号

```markdown
# 1、在TCP和UDP的段头中有两个端口号
	源端口号（source port-number）
	宿（目的）端口号（destination port-number）
# 2、TCP使用端口号来标识执行发送和接收的应用进程，
	端口号可以帮助TCP来分离字节流并且把相应字节传递给正确的应用程序。
	根据IP地址和端口号就可以唯一地确定信宿主机中某个特定进程。
# 3、端口号可以是半永久的和临时的：
	①服务器端在一个半永久性的端口上来监听客户端的访问请求。
	②客户端使用临时端口在本地标识一个对话。
	③客户端的端口只在使用TCP服务时候才存在，而服务器端口只要服务器进程在运行就一直存在。 
# 4、端口号本质
	端口号是一个16比特的二进制数，其取值范围从0～65535。
# 5、应用
	网络上的计算机中运行的任何网络应用程序都有一个或多个端口号与之对应。
# 6、分类（三类）
	1、从0～1023的端口号被称为众所周知的端口号，并被限制使用——这些端口号已分配给标准的网络应用：如HTTP(80端口)、FTP(20端口，发送数据，21端口，接收数据)、SMTP等
	2、从1024～49151的端口号称为注册端口号，用来标识那些已经向IANA注册的应用。 比如mysql注册时使用的端口号8080
	3、从49152～65535的端口号称为私有端口号，是非注册的，并且可以动态地分配给任何应用进程。 

# 7、常见的一些“众所周知的端口号”
```

![image-20211013181052212](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013181052212.png)

![image-20211013181131686](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013181131686.png)

#### UDP：用户数据报协议

```markdown
# 1、“最简约的” Internet 传输协议

# 2、提供“尽力而为的” 服务，
    UDP数据段允许：丢失
    应用数据不按序到达

# 3、无连接：
    在UDP收发双方之间无需握手信号；
    每个UDP数据段的操作都互相独立。
# 4、为什么需要UDP?
	①无需建立连接,时间快（连接过程会增加延迟）
	②简单：在收发双方之间没有连接状态
	③段首部较短
	④无拥塞控制：UDP 可按需要随时发送
	⑤经常在流媒体中使用
        对传输速率敏感
        对传输可靠性不敏感
        允许数据丢失，出错就丢失，不需要向数据源报告
# 5、UDP的其它用途
	DNS
	SNMP
# 6、若需要通过UDP进行可靠传输，要怎么办？
	需要在应用层增加可靠性措施
	在应用程序中——程序员必须考虑出错恢复机制!

```

![image-20211013181637950](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013181637950.png)

#### TCP协议

```markdown
# 1、点对点
	一个发送方，一个接收方 
# 2、可靠，按序的字节流
	无“报文边界”，无结构，但有顺序
# 3、流量控制
	采用接收窗口机制，通过设置窗口大小控制流量
# 4、发送&接收缓存
```

![image-20211013181800572](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013181800572.png)

```markdown
# 5、全双工数据传输
	在同一连接上双向传输
	MSS：maximum segment size（向对方声明自己所能承受的最大段长度）
		最大段字节数＝1500,536,512
# 6、面向连接
	握手过程 (交换控制信息) ：在交换数据前初始化收发双方的状态。
	采用“三次握手”过程建立连接
```

![image-20211013181930929](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013181930929.png)

![image-20211013182120842](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013182120842.png)

> 7、TCP连接的建立：三次握手

```
1、序号用于跟踪通信顺序，确保多个包传输时无数据丢失。

2、通信双方建立连接时必须互相交换各自的初始序号
```

![image-20211013182238217](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013182238217.png)

![image-20211013182413242](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013182413242.png)

![image-20211013182424295](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013182424295.png)

```markdown
# 8、TCP流量控制
	1、流量控制
		发送端不可发送太多、太快以至于使接收端的缓存出现溢出
	2、接收端
		显式地向发送端通告自己的接收缓存的大小 (动态变化)
		RcvWindow 
	3、发送端
		需要保存已经发送的，但未被确认的数据。
```

![image-20211013182641138](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013182641138.png)



## 第六章：计算机局域网络

### 1、局域网（LAN）概述

```markdown
# 1、LAN的特点
	①覆盖范围小
		房间、建筑物、园区范围
		距离≤25km
	②高传输速率
		10Mb/s～1000Mb/s
	③低误码率
		10-8 ～ 10-11
	④拓扑：总线型、星形、环形
	⑤介质：UTP（双绞线）、Fiber（光纤）、COAX（同轴电缆）
	⑥私有性：自建、自管、自用
# 2、LAN的技术特征
	1、拓扑结构（逻辑、物理）
		总线型、星形、环形、树形
	2、介质访问方法
		CSMA/CD、Token-passing
	3、信号传输形式
		基带、宽带
# 3、局域网体系结构
	①局域网的标准：IEEE802（ISO8802）
		IEEE802是一个标准系列：IEEE802,  IEEE802.1～IEEE802.14
	②其体系结构只包含了两个层次：数据链路层、物理层
		数据链路层又分为逻辑链路控制和介质访问控制两个子层

```

![image-20211013183130876](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013183130876.png)

```markdown
# 4、IEEE802系列中的主要标准
	 802.2 – 逻辑链路控制
    802.3 – CSMA/CD（以太网） 
    802.4 – Token Bus （令牌总线）
    802.5 – Token Ring（令牌环）
    802.6 –分布队列双总线DQDB -- MAN标准
    802.8 – FDDI（光纤分布数据接口）
    802.11 – WLAN（无线局域网）
```

![image-20211013183309245](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013183309245.png)

> 数据链路层在不同的子标准中定义
>
> ​	  分别对应于LLC子层和MAC子层

### 2、局域网的数据链路层

```markdown
# 1、 按功能划分为两个子层：LLC和MAC
# 2、功能分解的目的：
	将功能中与硬件相关的部分和与硬件无关的部分分开，以适应不同的传输介质。
	解决共享信道(如总线)的介质访问控制问题，使帧的传输独立于传输介质和介质访问控制方法。
        LLC： 与介质、拓扑无关； 
        MAC：与介质、拓扑相关。
 
 # 3、局域网的数据链路层的特点
 	1、局域网链路支持多路访问，支持成组地址和广播；
	2、支持介质访问控制功能；
	3、提供某些网络层的功能，如网络服务访问点(SAP)、多路复用、流量控制、差错控制……

# 4、MAC子层功能
	实现、维护MAC协议，差错检测，寻址。
# 5、LLC子层功能
	向高层提供统一的链路访问形式，组帧/拆帧、建立/释放逻辑连接，差错控制，帧序号处理，提供某些网络层功能。(处理帧，连接处理)
	对不同的LAN标准，它们的LLC子层都是一样的，区别仅在MAC子层（和物理层）。

# 6、LLC的帧结构
```

![image-20211013183801452](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013183801452.png)

### 3、局域网的网络层和高层

```markdown
1、IEEE 802标准没有定义网络层和更高层：
	没有路由选择功能
		局域网拓扑结构比较简单，一般不需中间转接
	流量控制、寻址、排序、差错控制等功能由数据链路层完成
2、网络层和更高层通常由协议软件（如TCP/IP协议、IPX/SPX协议）和网络操作系统来实现。

```

### 4、介质访问控制法

```markdown
1、局域网使用广播信道（多点访问、随机访问），多个站点共享同一信道。问题：
    各站点如何访问共享信道？
    如何解决同时访问造成的冲突（信道争用）？
2、解决以上问题的方法称为介质访问控制方法。
	两类介质共享技术：
		①静态分配（FDM、WDM、TDM、CDM）
			不适用于局域网
		②动态分配（随机接入、受控接入）
			CSMA/CD、Token-Passing
			
# 局域网中的介质访问控制方法
	常见的有两种：
		1、载波检测多路访问/冲突检测（CSMA/CD） 
			①采用随机访问技术的竞争型介质访问控制方法
			②广播式的拓扑结构
			③Carrier Sense Multiple Access/Collision Detect   
		2、令牌传递（Token Passing）
			①Token Ring
			②Token Bus
			③FDDI
			④点到点的拓扑结构
			⑤采用（受控访问技术） 的分 （散控制型） 介质访问控制方法

```

#### 1、CSMA/CD

```markdown
# 1、CSMA/CD（工作原理，重点）
	1、多个站点如何安全地使用共享信道？
		最简单的思路：发送前先检测一下其它站点是否正在发送（即信道忙否）。
			①若信道空闲，是否可以立即发送？
				若有多个站点都在等待发送，必然冲突！
				解决：等待一段随机时间后再发（降低了冲突概率）
			②若信道忙，如何处理？
				继续监听：
					等到信道空闲后立即发送
					等到信道空闲后等待随机时间后再发送
				等待一段随机时间后再重新检测信道
		一旦出现两个站点同时发送的情况，如何处理？
			以上方法均无法处理！
# 2、出现两个站点同时发送的情况，如何处理？
	CSMA/CD—带冲突检测的载波监听多路访问
		用于IEEE802.3以太网
		（局域网介质访问的）工作原理：（重点）
			1、发送前先监听信道是否空闲，若空闲则立即发送；
			2、如果信道忙，则继续监听，一旦空闲就立即发送；
			3、在发送过程中，仍需继续监听。若监听到冲突，则立即停止发送数据，然后发送冲突强化信号（Jam）；
				发送Jam信号的目的是使所有的站点都能检测到冲突
			4、（冲突后的操作）等待一段随机时间（称为退避）以后，再重新尝试。
	
	归结为四句话：
		发前先听，空闲即发送，边发边听，冲突时退避。
```



![image-20211013184832625](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013184832625.png)

```markdown
# CSMA/CD协议的时间槽
	时间槽——能够检测到冲突的时间区间（也称为争用时隙或碰撞窗口）
# 若两站点之间传播时延为a，则时间槽＝2a。如下图所示：

```

![image-20211013185057458](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013185057458.png)



![image-20211013185120555](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013185120555.png)



![image-20211013185141172](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013185141172.png)



![image-20211013185208629](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013185208629.png)

![image-20211013185020335](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211013185020335.png)

```markdown
# 时间槽的意义
	一个站点开始发送后，若在时间槽内没有检测到冲突，则本次发送不会再发生冲突
	时间槽与网络跨距、传输速率、最小帧长有密切的关系
# 以太网中，时间槽＝51.2µs
	传输速率为10Mb/s时，一个时间槽内可发送512bits，即64字节（所以也称一个时间槽长度为64字节） 。
	由此可知：
		1. 冲突只可能在一帧的前64字节内发生；
		2. 帧长度小于64字节时，将无法检测出冲突；
			所以，以太网规定的最小帧长度为64字节
		3. 长度小于64字节的帧（碎片帧）都是无效帧。
		
# 与时间槽相关的几个网络参数
	采用CSMA/CD的局域网中，由于时间槽的限制传输速率R、网络跨距S、最小帧长Fmin三者之间必须满足一定的关系：
		Fmin＝kSR        k:系数
			有个非常重要的结论
				1、最小帧长度不变时，传输速率与网络跨距成反比；
				2、传输率固定时，网络跨距与最小帧长度成正比；
				3、网络跨距固定时，传输率与最小帧长度成正比。 

# 退避算法（退避时间的确定）
	CSMA/CD采用了截断二进制指数退避算法
	算法如下
		  1.  令基本退避时间T=2a（即时间槽长度）；
        2.  k=min（重传次数，10）；
        3.  r=在 [0, 1, …, (2k-1)] 中随机取一个数；
        4.  退避时间=rT。
	最大重传次数限定为16，若发送16次仍不成功，则发送失败
	
# CSMA/CD的优缺点
	1、控制简单，易于实现；
	2、网络负载轻40％以内）时，有较好的性能。（延迟较小）
	3、网络负载重时，性能急剧下降
		1)冲突数量增加
        * 各工作站需要频繁执行重发操作
        * 大量的重发操作反过来又使冲突率进一步增加
		2)网络延迟增大
		3)延迟时间不可预计（非确定性延迟）
```

#### 2、令牌传递

```markdown
# 主要用于IEEE802.5令牌环网 

# 拓扑结构：
	点到点链路连接，构成闭合环

# Token Ring(令牌)/802.5的操作
	1、哪个站点可以发送帧，是由一个沿着环旋转的称为“令牌”（Token）的特殊帧来控制的。
		只有持有令牌的站可以发送帧，而没有拿到令牌的站只能等待；
	2、拿到令牌的站将令牌转换成数据帧头，后面加挂上自己的数据进行发送；
	3、目的站点从环上复制该帧，帧则沿环继续往下循环
	4、数据帧循环一周后由源站点回收，并送出一个空令牌，使其余的站点能获得帧的发送权。

```

![image-20211025110039284](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211025110039284.png)

> Token Ring/802.5的操作举例

![image-20211025114117701](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211025114117701.png)

> IEEE802.5的帧结构

![image-20211025114159580](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211025114159580.png)

![image-20211025114323749](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211025114323749.png)

### 5、传统的以太网

```markdown
543规则一定要知道

# 1、以太网的产生和发展
	1、20世纪70年代中期由施乐公司（Bob Metcalfe）提出，数据率为2.94Mb/s，称为Ethernet（以太网）
		最初人们认为电磁波是通过“以太”来传播的
	2、经DEC, Intel和Xerox公司改进为10Mb/s标准（DIX标准）
		DIX V1（1980）、DIX V2（1982）－Ethernet II
		特征：基带传输、总线拓扑、CSMA/CD、同轴电缆
	3、1985年被采纳为IEEE 802.3，支持多种传输媒体。
		“带有冲突检测的载波监听多路访问方法和物理层技术规范”
	4、Ethernet II和IEEE 802.3二者区别很小
		仅是帧格式和支持的传输介质略有不同
	
	5、目前已发展到万兆以太网，仍在继续发展 …

# 2、IEEE 802.3以太网标准（主要按照速度划分）
	1、传统以太网：10Mb/s
		802.3   —— 粗同轴电缆
		802.3a —— 细同轴电缆
		802.3i  —— 双绞线
		802.3j  —— 光纤
	2、快速以太网（FE）：100Mb/s
		802.3u ——双绞线，光纤
	3、千兆以太网（GbE）：1000Mb/s（1Gb/s）
		802.3z —— 屏蔽短双绞线、光纤
		802.3ab —— 双绞线
	4、万兆以太网：10Gb/s

# 3、以太网的物理层选项和标识方法
	速率、信号方式、介质类型
```

![image-20211025115028797](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211025115028797.png)

```markdown
# 4、Ethernet/802.3操作
	1、任何站点发送数据时都要遵循CSMA/CD协议；
	2、每个站点都可以接收到所有来自其他站点的数据（广播信道）；
	3、只有地址与帧的目的地址相同的站点才接收数据；
	4、目的站点将复制该帧，其他站点则忽略该帧。

```

![image-20211025115309001](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211025115309001.png)

> Ethernet(美国公司给的格式)/IEEE802.3(国际统一格式)

![image-20211025115431897](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211025115431897.png)

```markdown
# 5、MAC地址
	1、又称为物理地址，它是网络站点的全球唯一的标识符，与其物理位置无关。但ip地址跟物理地址有关。
	2、注意：MAC地址是在数据链路层进行处理，而不是在物理层
	3、网络站点的每一个网络接口都有一个MAC地址。
		MAC地址大多固化在网络站点的硬件中
	4、一个站点允许有多个MAC地址，个数取决于该站点网络接口的个数（每个路由器的接口都有一个mac地址）。例如
		安装有多块网卡的计算机；
		有多个以太网接口的路由器。
	5、网络接口的MAC地址可以认为就是宿主设备的网络地址。
# 6、IEEE802.3标准规定
	1、MAC地址的长度为6个字节，共48位；（也可以是2个字节但是两个字节很少用）
		可表示246≈70万亿个地址（有2位用于特殊用途）
	2、高24位称为机构惟一标识符OUI ，由IEEE统一分配给设备生产厂商；
		如3COM公司的OUI=02608C
	3、低24位称为扩展标识符EI，由厂商自行分配给所生产的每一块网卡或设备的网络接口。

```

![image-20211025115842215](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211025115842215.png)

```markdown
# 7、MAC地址的三种类型
	①单播地址：（I/G=0）
		拥有单播地址的帧将发送给网络中惟一一个由单播地址指定的站点。——点对点传输
	②多播地址：（I/G＝1）
		拥有多播地址的帧将发送给网络中由组播地址指定的一组站点。——点对多点传输
	③广播地址（全1地址，FF-FF-FF-FF-FF-FF）
		拥有广播地址的帧将发送给网络中所有的站点。——广播传输

	注意：以上的分类只适用于目的地址。
	
# 8.1、同轴电缆以太网（10BASE5）
	1、粗同轴电缆，可靠性好，抗干扰能力强 
	2、收发器 :  发送/接收, 冲突检测, 电气隔离
	3、拓扑结构：总线型拓扑

```

![image-20211026181635279](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211026181635279.png)

```markdown
# 8.2细缆以太网（ 10Base2 ）
    细同轴电缆，可靠性稍差 
    无外置收发器 
    轻便、灵活、成本较低
    总线型拓扑

```

![image-20211026181901909](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211026181901909.png)

```markdown
# 8.3、双绞线以太网
	1、双绞线（UTP），两头压接RJ45连接器； 
	2、所有站点都与HUB （集线器）相连接；
	 3、HUB的作用：信号放大与整形
	4、星形拓扑，但逻辑拓扑结构仍然是总线。
	5、轻便、安装密度高、便于维护

```

![image-20211026182056308](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211026182056308.png)

![image-20211026182115481](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211026182115481.png)

```markdown
# 8.4、光纤以太网
	1、使用光纤介质；
		 两根62.5/125μm多模光纤，收发各一根
	2、 星形拓扑结构；
 	3、通常用于远距离网络连接；
 	4、主要类型：
 		①FOIRL（光纤中继器间链路）
		 	用于连接两个HUB（或中继器）
		 	链路间最大距离1 km
 		②10Base-FL（用以替代FOIRL）
			 链路间最大距离2 km
 			任意两节点间的中继器数≤6个
 	5、光纤与其他介质可使用介质转换器进行转换
		介质转换器是可连接不同介质的中继器

# 8.5、全双工以太网
	1、收、发使用不同的物理信道
	2、不再使用CSMA/CD机制，因此传输距离不受时间槽的限制；
		但要受到信号衰减的影响
	3、全双工操作的条件：
		①使用双绞线或光纤；
		②链路两端的设备都必须支持全双工操作；
			支持全双工的设备包括全双工网卡、网络交换机。

```

### 6、局域网扩展

```markdown
# 1、什么情况下需要扩展？
	1、网络范围扩大
	2、更多的站点加入网络
	3、多个独立的局域网进行互联
# 2、如何扩展？
	主要在三个层次上
		1、物理层
		2、数据链路层
		3、网络层
# 扩展方式
	“帧”突发、载波技术

# 3、在物理层上进行局域网扩展
	1、设备：
		总线网：中继器
		星形/环形网：集线器
	2、特点：
		一个网段上的信号不加选择地被复制到另一个网段；
		扩展后的网络仍是一个冲突域。
	3、优缺点：
		①简单、成本低
		②网络规模不能太大
			站点数量：冲突随站点数量的增多而变得越来越严重
			地域范围：时间槽的限制
		③只能互联相同类型的网络 
```

![image-20211026182758019](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211026182758019.png)

```markdown
# 4、在数据链路层上进行局域网扩展
	设备：
		网桥、交换机
	特点：
		①一个网段上的帧有条件地被转发到另一个网段；
		②扩展后的网络被网桥/交换机隔离成多个冲突域；
		③扩展后的网络仍是一个广播域。
	优缺点：
		①冲突被限制在小范围内，甚至可被消除；
		②地域范围不再受时间槽的限制；
			远程网桥可将局域网的范围扩展到几十公里以上
		③转发速度有所降低；
		④不能隔离广播帧。
```

![image-20211101105233598](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211101105233598.png)

```markdown
# 5、在网络层上进行局域网扩展
	1、设备：
		路由器
	2、特点：
		1>一个网络上的分组有条件地被转发到另一个网络；
		2>扩展后的网络被路由器分隔成多个子网。
	3、优缺点：
		* 隔离广播域，限制了广播帧的泛滥；
		* 地域范围可以任意扩展；
		* 能根据最佳路由转发分组；
		* 可以互联不同类型的网络；
		* 转发速度低，成本较高，维护复杂。

```

![image-20211101105452916](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211101105452916.png)

### 7、高速局域网

```markdown
# 1、从10Mb/s向100Mb/s、1000Mb/s迁移
	1>起因：对主干带宽的需求
	2>20世纪80年代末开始，直到今天仍未停止
	3>主要产品
		* FDDI
		* 快速以太网
		* 100VG-AnyLAN
		* 千兆以太网、万兆以太网
	4>最终胜利者是谁？
		关键：兼容 (保护投资)、灵活、简易、技术成熟
```

#### 1、快速以太网(FE)

```markdown
# 1、传输速率为100Mb/s的以太网，比传统以太网快10倍
	①标准为
		IEEE802.3u
	②拓扑结构
		为基于集线器的星形结构；
	③传输介质
		只支持双绞线和光纤；
	④帧结构和介质访问控制方式
		沿用IEEE802.3标准。
# 2、提供了10/100Mb/s自适应功能；
	IEEE802.3u定义了4种不同的物理层标准
	100Base-TX：使用两对5类双绞线（最常用）
	100Base-FX：使用62.5/125μm多模光纤
	100Base-T4：使用四对3类双绞线
	100Base-T2：使用两对3类双绞线
```

![image-20211101105932562](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211101105932562.png)

```markdown
# 3、快速以太网的应用
	①主干连接
	②需要高带宽的服务器和高性能工作站
		网络服务器、图形工作站、工程工作站、网管工作站
	③向桌面系统普及

```

![image-20211101110044759](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211101110044759.png)

#### 2、千兆位以太网和万兆位以太网

```markdown
# 1、千兆位以太网（Gigabit Ethernet，GbE）
	①为什么需要千兆以太网
		新的应用
		网络分布计算、计算机视频、网络存储
		快速以太网的迅速普及
		要求主干有更高的带宽
	②两个主要标准
        IEEE 802.3z，1998.6正式公布
        1000Base-SX，MMF/550m
        1000Base-LX，SMF/5000m
        1000Base-CX，屏蔽短铜缆/25m
        IEEE 802.3ab，1999.6正式公布
        1000Base-T，UTP/100m

# 2、千兆位以太网的特征
	* 1000Mb/s，全双工或半双工
	* 沿用10Mb/s传统以太网帧格式
	* 半双工仍使用CSMS/CD协议
	* 兼容10Base-T和100Base-T
	* 节点能力的自动协商
		链路两端的节点必须各自向对方通告自己的能力（速度、物理层类型、半/全双工）并自动选择合适的工作模式。

# 3、速率提高到1000Mb/s时的网络跨距问题：
	为保持兼容，半双工时的最小帧长度仍规定为64字节，导致网络跨距缩短为不足20米，实用价值大大降低！

# 4、解决方法：
	1. 将时间槽扩展为512字节（是以前的8倍）；
	2. “载波扩展”技术：帧长不足512字节时，在其后填充特殊的符号至512字节；
	短帧较多时将使网络传输效率大大降低。极端情况下，只有正常时的12%。

# 5、“帧突发”技术：允许站点连续发送多个短帧
	解决短帧较多时网络传输效率低的问题
	使用“帧突发”技术后，效率可提高到72%，达到快速以太网的95％

```

![image-20211101113437728](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211101113437728.png)

> 6、千兆以太网的物理层技术

![image-20211101113546280](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211101113546280.png)

![image-20211101113604735](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211101113604735.png)

```markdown
# 7、千兆以太网的应用
	①交换机到交换机的主干连接；
		将网络交换机之间的10/100M链路用1000M链路代替，可以显著地提高网络的整体性能。 
	
	②具有高带宽需求的服务器集群或某些高性能工作站与网络主干之间的连接；
		通过网络服务器中配置的千兆以太网卡，可以建立与交换机之间的1000M连接，极大地提高了服务器的传输带宽。 
	
	③企业网络或园区网络的主干；
		千兆位以太网交换机能同时支持多台100Mb/s交换机、路由器、集线器和服务器等设备。同时，以千兆位以太网交换机为核心的主干网络能支撑更多的网段，每个网段有更多的节点及更高的带宽。 
	
	④多机系统主机之间的互联。

```

#### 3、万兆位以太网

```markdown
# 1、万兆位以太网的特征
	* 传输速率为10Gb/s；
	* 保留了802.3的帧格式、最大帧长度和最小帧长度；
	* 不再使用CSMA/CD协议；
	* 只能工作在全双工方式；
	* 只使用光纤（多模或单模）作为传输介质；
	* 支持两种类型的物理层：10Gb/s局域网物理层和10Gb/s广域网物理层：
		多个万兆位以太网可以通过SONET/SDH网络实现广域连接，使用单模光纤时端到端的传输距离可达上百公里。  

# 2、标准：IEEE 802.3ae，2002年公布
	①局域网物理层：
		10GBase-X和10GBase-R，MMF:300m，SMF:几十km；
	②广域网物理层：
		10GBase-W，SMF:几百km以上。
		
# 3、速度提高到10Gb/s所遇到的问题
	①不采用特殊措施，网络跨距将只有2米
	②若使用“载波扩展”（帧长至少4096字节），短帧的传输效率将降低到1.5％
		同时使用“帧突发”，最大效率也只能达到30％
		“载波扩展”的额外开销使吞吐率下降，冲突概率增大 

# 4、解决方法
	* 前提：保持与现有以太网的兼容、低功耗和低成本
	* 抛弃CSMA/CD，只工作在全双工方式
	* 只使用光纤介质（双绞线成本太高）

# 5、万兆位以太网的应用
	主要是作为大型网络的主干网连接，目前尚不支持与端用户的直接连接。 

```

#### 4、FDDI

```markdown
# 1、特征
	①传输速率为100Mb/s；
 	②网络由光纤介质的双环构成，可靠性高；
 	③介质访问控制方法采用Token Passing；
 	④网络覆盖范围较大（几十km～几百km ）。
# 2、FDDI的环的连接方式
```

![image-20211101114305520](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211101114305520.png)

```markdown
# 3、FDDI的自修复功能
	正常情况下，仅主环工作，次环用于备份。当主环出现故障时，FDDI在能够自动重新配置，使网络流量绕过主环中的故障点从备份环中通过。 

```

![image-20211101114429597](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211101114429597.png)

```markdown
# 4、FDDI的优缺点
	①主要优点：
		* 令牌传递协议消除了数据冲突；
		* 双环结构提供了优秀的容错能力；
		* 内建的网络管理能力；
		* 令牌传递协议能保证预知的、确定的时延；
		* 在现有的100Mb/s的网络技术中，其网络覆盖范围最大，适用于大型LAN和MAN。
	
	②主要缺点：
		* 协议比较复杂；
		* 安装和管理相对困难；
		* 价格昂贵，与快速以太网和千兆以太网相比，性能价格比低；
		* 与广泛使用的以太网之间进行互联比较困难。
		* 目前正逐渐被快速以太网和千兆以太网所替代。 

```

### 8、无线局域网

```markdown
# 1、为什么需要无线网络?
	①有线网络的缺点
		* 临时组网不方便
			如运动会、军事演习
		* 网络互联要跨越公共场合时布线很麻烦
		* 难于解决移动站点问题
	
	②无线网络可以很好地解决以上问题
	
	③无线网络类型很多，如电信移动网络、无线局域网（WLAN）等
# 2、无线网络的应用
	* 在布线不方便或者不可能的情况组建网络
	* 漫游访问
	* 不同建筑物中的局域网之间的无线互联
	* 电视机、机顶盒、笔记本电脑/台式电脑和大容量存储设备之间的数据/视频流传输
	* 家庭网络
	
# 3、无线局域网的标准
	①WLAN，采用无线传输技术的局域网
	②IEEE802.11标准，1997年发布
		工作频带2.4GHz，最大传输速率2Mb/s
	③1999年9月，802.11a和802.11b
        802.11a：工作频带5.8GHz，最大传输速率54Mb/s
        802.11b：工作频带2.4GHz，最大传输速率11Mb/s
	④2003年6月，802.11g
		工作频带2.4GHz，最大传输速率54Mb/s
	⑤2007年3月，802.11n（草案2.0版本）
		工作频带2.4GHz/5GHz，最大传输速率约为300Mb/s
# 4、无线局域网的物理层
	拓扑结构
		①有基础结构的拓扑
        依赖于一个服务访问点（AP）或一个有线网络
        适合于免布线的办公室环境和家庭无线网络
		②无基础结构的拓扑
			又称为临时结构网络（Ad Hoc Network） 
			不依赖于服务访问点或有线网络，由无线站点通过相互关联临时组成一个网络
			适合于需要临时搭建网络的场合 
# 5、WLAN中的AP和BSS
	1、AP（无线接入点，Access Point）
		①是WLAN中的“无线基站”，类似有线网络中的HUB
		②AP的功能：
			站点之间的信息转发
			WLAN与有线局域网之间的“桥接器”
	2、BSS（基本服务集，Basic Service Set） 
		①是一个地理区域，类似于移动电话系统中的蜂窝结构。
		②每一个BSS都有唯一的BSSID（也称为SSID），只有设置了正确的BSSID，站点才能访问BSS。 

```

![image-20211101115447175](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211101115447175.png)

```markdown
# 6、WLAN的物理介质
	1、跳频扩展频谱（FHSS）
		FHSS将工作频带分成83个1MHz带宽的信道。FHSS使用其中的79个信道，数据载波频率可在这79个频率之间随机跳动。
```

![image-20211101115549924](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211101115549924.png)

```markdown
# 6、WLAN的物理介质
	2、直接序列扩展频谱（DSSS）
		①使用一个具有更高比特率的片码（chipping code）对发送的数字信号（1和0）进行调制。
			802.11标准中，片码为11位。
		②DSSS将2.4GHz的工作频带划分成14个22MHz的频道（频道之间有重叠）。数据可从任何一个频道进行传送（无需跳频）。

	3、红外线
		波长850到950nm，传输范围较小，仅限于室内

# 7、无线局域网的数据链路层
	①LLC子层与IEEE 802.3完全相同，所不同的仅是MAC子层
	②MAC子层采用CSMA/CA（载波检测多路访问/冲突避免）协议
		* 不是在发送过程中去监听是否发生了冲突，而是发送前设法避免冲突的发生
		* “冲突避免”采用了三种机制来实现：预约信道、正向确认（Acknowledgement）和RTS/CTS 
		一、冲突避免的措施
			1>预约信道
				发送站点向所有其他无线站点通告本站点将要占用信道多长时间，以便让其它站在这段时间内不要发送数据，起到了避免冲突的效果。
			2> 正向确认
				接收站点正确收到数据帧时，就向发送站点发送一个ACK帧作为接收成功的肯定回答，否则将不采取任何动作。发送站点根据是否收到ACK帧决定重发与否。
				用于冲突的恢复。

			3>RTS/CTS
				通过RTS/CTS帧预约信道，以避免隐蔽站冲突问题。
				例如：有A、B、C三个站点，B在A和C之间。A和C都能与B通信，但A和C却因为相距较远而彼此无法了解对方的存在，若它们都向B发送数据就会发生冲突。  

# 8、802.11n无线局域网
	①新一代WLAN标准
	②达300Mbit/s的传输速率
	③采用Spatial Multiplexing MIMO（空间多路复用多入多出）技术MIMO是一种智能天线技术，它通过多组独立天线组成的天线阵列系统，通过创建多个并行空间信道，将要传输的数据分割成多个部分进行并行独立传输。
	④MIMO带来的优点
		数据传输率高、传输信号稳定、噪音干扰小、传输距离远。  

```

![image-20211101161103649](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211101161103649.png)



## 第七章、广域网

> 一定是广域网先产生，然后再是局域网在产生

### 1、广域网(WAN)概述

```markdown
# 1、概念
	覆盖较大地理范围的数据通信网络（10km>)
	是用网络提供商和电信公司所提供的传输设备传输数据。
	
# 2、特点
	①范围广：地区、国家、洲际、全球
	②建立在电信网络的基础上
	③应用环境复杂：线路、技术、协议、设备
		* 介质：双绞线、同轴、光纤、地面微波、卫星
		* 传输速率：主干网高，但接入速率低（成本高）
		* 误码率高：复杂的错误控制技术，开销大（但是局域网误码率低，因为他短，而广域网长）
		* 拓扑结构：点到点连接构成的网状结构
		* 公共服务：电信服务商
			Pro：资源利用率高、用户建网成本低
			Con：用户必须依赖电信部门

```

![image-20211102181018284](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211102181018284.png)

```markdown
# 3、主要的广域网技术
	①PSTN:公共电话交换网
		是以电路交换技术为基础的用于传输模拟通话的通信网络。
	②X.25：公共分组交换网
		使用X.25协议进行分组交换的数据通信技术
	③Frame Relay：帧中继（FR）
		一种高速的在链路层进行分组交换的技术
	④ISDN：综合业务数据网
		一种可以在电话线路上同时提供音频、视频和数据服务的数字网络
	⑤DDN：数字数据网
		一种利用数字信道提供半永久性连接电路的数字网络
	⑥xDSL：数字用户线
		一种利用电话线路进行数字传输的高速接入技术
	⑦ATM：异步传输模式
		一种基于异步时分多路复用的、采用信元交换代替分组交换的技术
# 4、广域网的协议层次
	广域网涉及OSI/RM的最低三层：
		* 物理层：PSTN、DDN、xDSL、SONET
		* 数据链路层：ISDN、FR、ATM
		* 网络层：X.25
```

![image-20211102181412735](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211102181412735.png)

### 2、公共传输系统

```markdown
# 1、广域网的基础--电信网络
	1>、提供公共传输平台
		* 物理线路、技术支持、网络服务（音频、视频、数据）
		* 模拟通信（仅本地环路）、数字通信
```

![image-20211102181654800](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211102181654800.png)

#### 1、PSTN(电话系统)

```markdown
# 1.1、电话系统（PSTN）
	①是一种分布最广泛、最容易获得的服务
	②除本地环路外，基本实现了数字传输
	③三个部分：
        交换局：端局(CO)，汇接局、长途局——提供交换连接(数字传输)
        接入网（本地环路、用户环路）——提供用户接入（物理传输）
        传输网（干线、中继线）——交换局间的连接线路
	④电话网中的核心技术
		1>、PCM编码（模拟到数字用的技术）
			每路语音信号被转换成64kb/s的PCM编码数字信号
				在端局转换
		2>、时分多路复用技术
			多路PCM信号复合成更高速率的信号
				E1～E5（ DS1～DS5）
	⑤电话网也可以用于计算机通信
		1>、通过拨号连接可以实现不超过64kb/s的传输速率
			由于模拟传输技术的限制，实际传输速率≤56kb/s
		2>、通过ISDN、xDSL可以实现更高速率的通信
			ISDN: 128kb/s， xDSL: 512kb/s～55Mb/s

```

![image-20211102181941784](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211102181941784.png)

```markdown
	⑥通过PSTN接入因特网
		1>、用户需要“猫”和拨号软件，拨通后即可启动IE上网
		2>、连接方式
```

![image-20211102182511850](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211102182511850.png)

```markdown
	⑦用电话线路进行通信的优缺点
		* 优点
			*.1、电话线路非常容易获得
				   对于移动人群特别重要
			*.2、设备简单（Modem），大多数计算机中已集成
				   笔记本电脑和品牌电脑的标准配置
			*.3、成本低
				  设备便宜、通信费用低
		* 缺点
			速度慢，不超过56kb/s
			电路连接时间长

```

#### 2、SONET(同步光纤网)

```markdown
# 2、SONE(同步光纤网)光传输网络
	①同步光纤网：方便国际间的光纤干线的互通。
	②使用光纤介质的高速WAN通信技术
	③基本速率级别（OC-1）为51.84Mb/s，最高可达OC-192乃至OC-256（13.271Gb/s）
	④能够与ATM（采用定长信元）很好地兼容
		ATM的两种速率：155.52Mb/s和622.08Mb/s正好对应于OC-3和OC-12
	⑤拓扑结构：网状、环形（双环）

```

![image-20211115114219996](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211115114219996.png)

```markdown
# 2.1、SONET体系结构
	①只对应于OSI的物理层
	②包含4个子层：
		* 光子：在光纤上传输数据位流，光电转换
		* 分段：帧的组装及正确传输
		* 线路：同步和信号交换，复用，故障恢复
		* 路径：端到端的传输，与其他网络（ATM、 FDDI、ISDN、SMDS等）的接口，即定义这些网络的帧如何映射到SONET帧中
	③优点：选距离的超高速通信。
	④应用领域：选程教学，高质量的音频和视频的传输、复杂图形的超高速传输。

# 2.2、SONET基本帧结构
	①810字节（90列×9行），其中：
		1、传输开销（3列，共27字节）
			其中：同步开销3行（9字节），线路开销6行（18字节）
		2、同步载荷包（87列，共783字节）
			其中：路径开销1列（9字节），净载荷86列（774字节）
	②从上至下逐行传输，每125μs传输一帧（TDM）

```

![image-20211115114523604](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211115114523604.png)

```markdown
# 2.3、SONET的优点
	非专利标准，很多供应商均提供兼容设备
		ATM交换机、ISDN交换机、路由器
	远距离的超高速通信

# 2.4、SONET应用领域
	①在相距很远的网络之间提供超高速连接
	②远程教学
	③高质量的音频和视频传输
	④远距离的视频会议、远程医学诊断
	⑤复杂图形的高速传输
	⑥高分辨率卫星照片
```

#### 3、xDSL(数字用户线)

```markdown
# 1、基本介绍
	①一般的模拟信号的带宽在0-4kHZ，c=wlog2M为网络传输速度，只有整体带宽提高了，速度才能提高。
	②DSL是在普通电话线上实现数字传输的技术（但一般都是模拟信号传输）。
	③DSL属于接入网技术——“最后一公里”；
	④开发目的：
		宽带接入：满足视频、音频、多媒体、互联网等需要高带宽的应用；
		利用现有的、广泛应用的电话铜线，而不是重新布线。
	⑤关键：提高电话线路的传输带宽！
		方案：利用4kHz以上语音通信未使用的频带
	⑥DSL的主要应用：
		网吧、住宅小区的用户接入互联网
		WWW，文件/电影/音乐下载

# 2、DSL包括以下几种技术：
    ADSL      非对称数字用户线（我国使用最广泛）
    RADSL   速率自适应非对称数字用户线
    HDSL      高比特率数字用户线
    VDSL      甚高比特率数字用户线
    SDSL      单线对HDSL数字用户线（HDSL2）
```

![image-20211115115140922](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211115115140922.png)

```markdown
# 3、DSL的调制方式
	①2B1Q（脉冲幅度调制PAM的一种）
		1、用4电平脉冲信号表示2个二进制位；
		2、码间干扰大，需要使用自适应均衡器和回波抵消器；
		3、信号频谱延伸到4kHz以下，无法与语音通信并存（4khz以上的是数字通信，但是此频谱延伸到4khz以下，语音信号被占，所以无法共存）。
	②CAP（无载波幅度相位调制）
		1、属于正交幅度调制QAM，幅度调制和相位调制的结合；
		2、编码效率高，每个传输符号可携带2～9位信息；
		3、可以与语音通信并存。
	③DMT（离散多音频调制）
		1、把数据调制到多个子载波上：先把数据分配到256个宽度为4.3125kHz的信道，每个信道再采用QAM调制；
			理论上，DMT的数据速率可达256×32kb/s＝8192kb/s
		2、可做到信息量的自适应分配，抗噪声性能非常好；
			根据信道特性和噪声频谱动态调整分配给每个信道的比特数，使每个信道的比特数量增加。
		3、频谱利用率高，在1MHz的带宽上实现了8Mb/s的传输速率；
		4、规定为ADSL的标准调制方式（ITU-T G.922）。
# 4、信息量的自适应分配
```

![image-20211115115427276](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211115115427276.png)

#### 4、ADSL(非对称数字用户线)

```markdown
# 1、基本介绍
	①宽带接入技术，我国使用最广泛
	②两种标准：
		G.992.1（G.dmt）， G.992.2（G.lite）
	③上下行非对称：
		* 用户→CO（上行）：
			G.dmt：640kb/s， G.lite：512kb/s
		* CO→用户（下行）：
			G.dmt：6.144Mb/s（最高8Mb/s），G.lite：1.5Mb/s
	④实际的用户端速率与线路质量、距离和电信公司的市场策略有关

# 2、ADSL的特点
	①上行速率与下行速率不相同
		* 与因特网访问特点相适应
			下载数据量远大于上传数据量：FTP、WWW、视频点播
		* 低的上行速率使近端串扰NEXT较低(频率小，抗干扰能力强)
			可以简化用户端设备的设计→成本降低
	②仅使用一对铜线，可直接利用原有的电话线；
	③语音和数据同时传输，互不干扰：
		* 频分复用：
			语音：0～4kHz，数据：30kHz～1.1MHz；
			用户端和局端都需要安装话音/数据分离器。
	④上网时不用拨号，永远在线（打电话仍需拨号）。
# 3、ADSL的频谱分配
	铜质双绞线在4km的距离内带宽可达1.1MHz

```

![image-20211115115841718](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211115115841718.png)

![image-20211115115903558](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20211115115903558.png)

### 3、广域网的通信服务类型

```markdown
### 1、电路交换
	PSTN、ISDN：低速，不超过144kb/s
	主要用于：家庭上网、移动/远程用户连接企业LAN、高速线路的备份等

### 2、分组交换(一组使数据报方式（不能保证按序到达），一种是虚电路方式)
	X.25：可靠性高、速度慢（≤64kb/s）
		适用于一般的数据通信
	帧中继：速度快（2Mb/s以上）
		适用于企业用户，如远程局域网互联、多媒体通信
	优点：灵活性好

### 3、租用专线
	模拟专线：半永久性地租用电话线路
	数字专线：半永久性地租用电信网络的子信道，如DDN
		带宽：N×64kb/s（1≤N ≤30），为部分或全部E1带宽
	昂贵，只适用于企业用户

```

### 4、广域网的链路层协议

```markdown
# 1、HDLC（高级数据链路控制协议）
	①面向位的链路层协议
	②HDLC链路的两种基本配置：
		非平衡型：主站/从站（点到点链路或多点链路）
		平衡型：复合站（点到点链路）
```

![image-20220111204940554](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20220111204940554.png)

```markdown
# 2、HDLC的帧格式
```

![image-20220111205022779](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.assets/image-20220111205022779.png)

```markdown
### ①标志：帧的开始和结束（01111110B，7EH）
           为防止标志之间出现同样的位模式，需要使用“位填充法”。
             即发送方每碰到5个连续“1”，就要填充一个“0”。
             接收方需做删“0”操作（5个连续“1”后面的“0”要删除）。
           连续发送多个帧时，前一帧的结束标志可以作为下一帧的起始标志。
           无信息发送时，可以连续发送标志，使接收端与发送端保持同步。

### ②地址：次站地址（非平衡方式）或确认站地址（平衡方式）。
           全“1”地址为广播地址，全“0”地址为非法地址，有效地址为254个
           
 ### ③帧校验：用于错误检测，CRC16。校验区间为：地址、控制和数据。

### ④控制：帧类型和链路控制
```

